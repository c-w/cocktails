{"version":3,"sources":["components/PaginatedCardGroup.js","components/SearchBar.js","utils/MultiMap.js","i8n/en.js","i8n/index.js","components/AverageRatingsDisplay.js","utils/hashCode.js","utils/mean.js","views/BottlesView.js","views/BrandsView.js","components/CheckBoxList.js","components/MultiLineText.js","components/RadioList.js","components/StarRating.js","workers/WebWorker.js","workers/recipesWorker.js","utils/cache.js","views/RecipesView.js","views/SpiritsView.js","utils/fetchJson.js","App.js","serviceWorker.js","index.js"],"names":["PaginatedCardGroup","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onPageChange","event","activePage","setState","state","_this$props","items","itemsPerPage","className","totalPages","Math","ceil","length","pageStart","pageEnd","itemsOnPage","slice","react_default","a","createElement","Card","Group","Pagination","prevItem","nextItem","firstItem","lastItem","React","PureComponent","ON_CHANGE_DEBOUNCE_MS","SearchBar","onChange","value","_onChange","defaultValue","debounce","placeholder","Input","icon","Component","MultiMap","_map","key","item","push","func","entries","map","en","recipesCacheWarning","recipesLoadError","recipesSearchPlaceholder","recipesSortByDate","recipesSortByRating","meanRatingSupport","meanRatingValue","brandsSearchPlaceholder","spiritsSearchPlaceholder","bottlesSpiritSelectPlaceholder","bottlesSpiritAllEntries","menuEntryRecipes","menuEntrySpirits","menuEntryBrands","menuEntryBottles","colors","toMeanCard","_ref","name","mean","support","color","abs","str","hash","i","charCodeAt","hashCode","randomColor","header","description","Link_default","to","concat","Statistic","label","i8n","toFixed","AverageRatingsDisplay","onSearchTextChange","filterText","query","aggregations","recipes","ratingsPerPage","searchPlaceholder","ratingsFilter","startsWith","maxSupport","parseInt","substr","_ref4","minSupport","_ref5","searchTerms","toLowerCase","split","searchTerm","trim","_ref6","some","indexOf","buildRatingsFilter","meanRatings","aggregationToRatings","forEach","aggregation","filter","recipe","Ingredients","add","Rating","_ref2","numbers","_ref3","slicedToArray","ratings","reduce","prev","cur","sum","sort","b","sign","toMean","SearchBar_SearchBar","PaginatedCardGroup_PaginatedCardGroup","matcherFor","spirits","RegExp","Array","from","join","BottlesView","onSpiritChange","selectedSpirit","words","BottlesView_SpiritsSelector","BottlesView_TopBottlesDisplay","spirit","SpiritsSelector","e","_this2","_this$props2","allOption","text","spiritOptions","options","Dropdown","search","selection","TopBottlesDisplay","_this$props3","AverageRatingsDisplay_AverageRatingsDisplay","spiritMatcher","bottles","Set","ingredient","match","replace","bottle","getBottlesForSpirit","BrandsView","brands","CheckBoxList","onToggle","List","horizontal","Item","Checkbox","checked","MultilineText","lines","line","pop","textToLines","RadioList","Radio","StarRating","rating","defaultRating","maxRating","disabled","WebWorker","worker","code","toString","blob","Blob","Worker","URL","createObjectURL","recipesWorker","hasAny","token","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","Symbol","iterator","next","done","word","err","return","getFilterTerms","numFilters","combineWords","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","combined","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","recipeWords","ingredients","blacklist","sentence","combinedWords","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","regexp","combineTokens","quantity","ignored","iterable","_counter","counter","buildCounter","mostCommon","num","pair","Counter","term","enabled","self","addEventListener","filterTerms","data","postMessage","RECIPES_CACHE_KEY","FILTERTERMS_CACHE_KEY","FILTERTERMS_IS_DIRTY","IS_DIRTY","NOT_DIRTY","loadRecipesData","cached","localStorage","getItem","JSON","parse","splitTokens","hasAllFilterTerms","searchCorpus","filterTerm","every","searchValue","hasFilterText","Name","sortOrders","comparator","recipeA","recipeB","recipeToCard","MultiLineText_MultilineText","meta","StarRating_StarRating","filterToCheckbox","RecipesView","onSearchTermToggle","newFilterTerms","newFilterText","onSortOrderChange","sortOrder","shouldShowRecipe","_this$state","order","loadFilterTerms","setItem","stringify","storeFilterTerms","recipesPerPage","_this$state2","displayableRecipes","CheckBoxList_CheckBoxList","RadioList_RadioList","SpiritsView","checkStatus","response","status","error","Error","statusText","parseJSON","json","fetchJson","url","fetch","then","App","onRecipesLoaded","cacheDate","onStaleDataWarningDismiss","renderIndex","Redirect_default","renderRecipes","RecipesView_RecipesView","params","pageSize","renderSpirits","SpiritsView_SpiritsView","renderBrands","BrandsView_BrandsView","renderBottles","BottlesView_BottlesView","renderStaleDataWarning","Message","warning","floating","onDismiss","Icon","Content","Header","renderNav","location","pathname","Menu","size","fixed","as","Link","active","recipesUrl","wordsUrl","Promise","all","newData","oldData","Date","storeRecipesData","catch","Container","content","HashRouter_default","Route_default","path","component","Switch_default","exact","render","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","ReactDOM","App_App","process","document","getElementById","href","origin","contentType","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.85d0beaa.chunk.js","sourcesContent":["import React from 'react';\nimport Card from 'semantic-ui-react/dist/es/views/Card/Card';\nimport Pagination from 'semantic-ui-react/dist/es/addons/Pagination/Pagination';\n\nexport default class PaginatedCardGroup extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activePage: 1\n    };\n  }\n\n  onPageChange = (event, props) => {\n    const { activePage } = props;\n    this.setState({ activePage });\n  }\n\n  render() {\n    const { activePage } = this.state;\n    const { items, itemsPerPage, className } = this.props;\n\n    const totalPages = Math.ceil(items.length / itemsPerPage);\n    const pageStart = (activePage - 1) * itemsPerPage;\n    const pageEnd = pageStart + itemsPerPage;\n    const itemsOnPage = items.slice(pageStart, pageEnd);\n\n    return (\n      <div className={className}>\n        <div className=\"group\">\n          <Card.Group items={itemsOnPage} />\n        </div>\n        <div className=\"pagination\">\n          <Pagination\n            prevItem={null}\n            nextItem={null}\n            firstItem={null}\n            lastItem={null}\n            activePage={activePage}\n            onPageChange={this.onPageChange}\n            totalPages={totalPages}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Input from 'semantic-ui-react/dist/es/elements/Input/Input';\nimport debounce from 'lodash.debounce';\n\nconst ON_CHANGE_DEBOUNCE_MS = 250;\n\nexport default class SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n    };\n\n    this._onChange = debounce(props.onChange, ON_CHANGE_DEBOUNCE_MS);\n  }\n\n  onChange = (event, props) => {\n    const { value } = props;\n\n    this.setState({ value }, () => this._onChange(value));\n  }\n\n  render() {\n    const { placeholder, className } = this.props;\n    const { value } = this.state;\n\n    return (\n      <div className={className}>\n        <Input\n          icon=\"search\"\n          value={value}\n          placeholder={placeholder}\n          onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n","export default class MultiMap {\n  constructor() {\n    this._map = {};\n  }\n\n  add(key, item) {\n    if (!this._map[key]) this._map[key] = [];\n    this._map[key].push(item);\n  }\n\n  get(key) {\n    return this._map[key] || [];\n  }\n\n  map(func) {\n    return Object.entries(this._map).map(func);\n  }\n}\n","export default {\n  recipesCacheWarning: 'Using cached recipes, last updated:',\n  recipesLoadError: 'Something went wrong while loading the recipes',\n  recipesSearchPlaceholder: 'Search for recipes...',\n  recipesSortByDate: 'Sort by date',\n  recipesSortByRating: 'Sort by rating',\n  meanRatingSupport: 'Cocktails',\n  meanRatingValue: 'Avg Rating',\n  brandsSearchPlaceholder: 'Search for brands...',\n  spiritsSearchPlaceholder: 'Search for spirits...',\n  bottlesSpiritSelectPlaceholder: 'Select spirit...',\n  bottlesSpiritAllEntries: '(All)',\n  menuEntryRecipes: 'Recipes',\n  menuEntrySpirits: 'Top Spirits',\n  menuEntryBrands: 'Top brands',\n  menuEntryBottles: 'Top bottles',\n};\n","import en from './en';\n\nexport default en;\n","import React from 'react';\nimport Link from 'react-router-dom/Link';\nimport Statistic from 'semantic-ui-react/dist/es/views/Statistic/Statistic';\nimport PaginatedCardGroup from './PaginatedCardGroup';\nimport SearchBar from './SearchBar';\nimport MultiMap from '../utils/MultiMap';\nimport mean from '../utils/mean';\nimport hashCode from '../utils/hashCode';\nimport i8n from '../i8n';\n\nconst colors = ['orange', 'yellow', 'olive', 'green', 'teal', 'blue', 'violet', 'purple', 'pink', 'brown'];\n\nconst randomColor = (name) => colors[Math.abs(hashCode(name)) % colors.length];\n\nconst toMeanCard = ({ name, mean, support }) => {\n  const color = randomColor(name);\n\n  return {\n    key: name,\n    header: name,\n    color,\n    description:\n      <Link to={`/recipes/${name}`}>\n        <Statistic.Group>\n          <Statistic label={i8n.meanRatingSupport} value={support} color={color} />\n          <Statistic label={i8n.meanRatingValue} value={mean.toFixed(2)} color={color} />\n        </Statistic.Group>\n      </Link>\n  };\n}\n\nconst toMean = (recipes, aggregations) => {\n  const aggregationToRatings = new MultiMap();\n  aggregations.forEach(aggregation =>\n    recipes.filter(recipe => recipe.Ingredients.toLowerCase().indexOf(aggregation.toLowerCase()) !== -1).forEach(recipe =>\n      aggregationToRatings.add(aggregation, recipe.Rating)));\n\n  return aggregationToRatings\n    .map(([name, ratings]) => ({ name, mean: mean(ratings), support: ratings.length }))\n    .sort((a, b) => Math.sign(b.mean - a.mean));\n}\n\nconst buildRatingsFilter = (filterText) => {\n  if (filterText.startsWith('#<')) {\n    const maxSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support < maxSupport;\n  }\n\n  if (filterText.startsWith('#>')) {\n    const minSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support > minSupport;\n  }\n\n  if (filterText.length > 0) {\n    const searchTerms = filterText.toLowerCase().split('||').map(searchTerm => searchTerm.trim());\n    return ({ name }) => searchTerms.some(searchTerm => name.toLowerCase().indexOf(searchTerm) !== -1);\n  }\n\n  return () => true;\n}\n\nexport default class AverageRatingsDisplay extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filterText: props.query || ''\n    };\n  }\n\n  onSearchTextChange = (filterText) => {\n    this.setState({ filterText });\n  }\n\n  render() {\n    const { aggregations, recipes, ratingsPerPage, searchPlaceholder } = this.props;\n    const { filterText } = this.state;\n\n    const ratingsFilter = buildRatingsFilter(filterText);\n    const meanRatings = toMean(recipes, aggregations).filter(ratingsFilter);\n\n    return (\n      <div>\n        <div className=\"brandControls\">\n          {searchPlaceholder &&\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={searchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />}\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={ratingsPerPage}\n          items={meanRatings.map(toMeanCard)}\n          key={meanRatings}\n        />\n      </div>\n    );\n  }\n}\n","export default function hashCode(str) {\n  let hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    let chr = str.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0;\n  }\n\n  return hash;\n}\n","function sum(numbers) {\n  return numbers.reduce((prev, cur) => prev + cur, 0);\n}\n\nexport default function mean(numbers) {\n  return sum(numbers) / numbers.length;\n}\n","import React from 'react';\nimport Dropdown from 'semantic-ui-react/dist/es/modules/Dropdown/Dropdown';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nfunction matcherFor(spirits) {\n  return new RegExp(`\\\\s(${Array.from(spirits).join('|')})(\\\\s|$)`, 'i');\n}\n\nfunction getBottlesForSpirit(spirit, spirits, recipes) {\n  const spiritMatcher = !spirit ? matcherFor(spirits) : matcherFor([spirit]);\n\n  const bottles = new Set();\n\n  recipes.forEach(recipe =>\n    recipe.Ingredients\n      .split('\\n')\n      .filter(ingredient => ingredient.match(spiritMatcher) != null)\n      .map(ingredient => ingredient.replace(/\\([^)]*\\)/g, ''))\n      .map(ingredient => ingredient.replace(/^[^ ]*/, ''))\n      .map(ingredient => ingredient.trim())\n      .forEach(bottle => bottles.add(bottle)));\n\n  return Array.from(bottles).sort();\n}\n\nexport default class BottlesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedSpirit: props.query\n    };\n  }\n\n  onSpiritChange = (selectedSpirit) => this.setState({ selectedSpirit });\n\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n    const { selectedSpirit } = this.state;\n\n    return (\n      <div>\n        <div className=\"bottleControls\">\n          <SpiritsSelector\n            selectedSpirit={selectedSpirit}\n            spirits={words.spirits}\n            onChange={this.onSpiritChange}\n          />\n        </div>\n        <TopBottlesDisplay\n          spirit={selectedSpirit}\n          spirits={words.spirits}\n          recipes={recipes}\n          ratingsPerPage={ratingsPerPage}\n        />\n      </div>\n    );\n  }\n}\n\nclass SpiritsSelector extends React.PureComponent {\n  onChange = (e, { value }) => this.props.onChange(value);\n\n  render() {\n    const { spirits, selectedSpirit } = this.props;\n\n    const allOption = { text: i8n.bottlesSpiritAllEntries, value: '' };\n    const spiritOptions = Array.from(spirits).sort().map(spirit => ({ text: spirit, value: spirit }));\n    const options = [allOption].concat(spiritOptions);\n\n    return (\n      <Dropdown\n        search\n        selection\n        placeholder={i8n.bottlesSpiritSelectPlaceholder}\n        options={options}\n        onChange={this.onChange}\n        defaultValue={selectedSpirit}\n      />\n    );\n  }\n}\n\nclass TopBottlesDisplay extends React.PureComponent {\n  render() {\n    const { spirit, spirits, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={getBottlesForSpirit(spirit, spirits, recipes)}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class BrandsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.brands}\n        searchPlaceholder={i8n.brandsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport Checkbox from 'semantic-ui-react/dist/es/modules/Checkbox/Checkbox';\nimport List from 'semantic-ui-react/dist/es/elements/List/List';\n\nexport default class CheckBoxList extends React.PureComponent {\n  onToggle = (event, props) => {\n    this.props.onToggle(props.label);\n  }\n\n  render() {\n    const { items, className } = this.props;\n\n    return (\n      <div className={className}>\n        <List horizontal>\n          {items.map(item =>\n            <List.Item key={item.label}>\n              <Checkbox\n                label={item.label}\n                checked={item.checked}\n                onChange={this.onToggle}\n              />\n            </List.Item>\n          )}\n        </List>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nconst textToLines = (text) => {\n  const lines = [];\n\n  text.split('\\n').forEach((line, i) => {\n    lines.push(<span key={`line-${i}`}>{line}</span>);\n    lines.push(<br key={`newline-${i}`} />);\n  });\n  lines.pop();\n\n  return lines;\n}\n\nexport default class MultilineText extends React.PureComponent {\n  render() {\n    const { text } = this.props;\n\n    return <div>{textToLines(text)}</div>;\n  }\n}\n","import React from 'react';\nimport List from 'semantic-ui-react/dist/es/elements/List/List';\nimport Radio from 'semantic-ui-react/dist/es/addons/Radio/Radio';\n\nexport default class RadioList extends React.PureComponent {\n  onChange = (event, props) => {\n    this.props.onChange(props.value);\n  }\n\n  render() {\n    const { items, checked, className } = this.props;\n\n    return (\n      <div className={className}>\n        <List horizontal>\n          {items.map(item =>\n            <List.Item key={item.value}>\n              <Radio\n                label={item.label}\n                value={item.value}\n                checked={checked === item.value}\n                onChange={this.onChange}\n              />\n            </List.Item>\n          )}\n        </List>\n      </div>\n    );\n  };\n}\n","import React from 'react';\nimport Rating from 'semantic-ui-react/dist/es/modules/Rating/Rating';\n\nconst maxRating = 5;\n\nexport default class StarRating extends React.PureComponent {\n  render() {\n    const { rating } = this.props;\n\n    return (\n      <Rating\n        icon='star'\n        defaultRating={rating}\n        maxRating={maxRating}\n        disabled\n      />\n    );\n  }\n}\n","export default class WebWorker {\n  constructor(worker) {\n    const code = worker.toString();\n    const blob = new Blob([`(${code})()`]);\n    return new Worker(URL.createObjectURL(blob));\n  }\n}\n","export default () => {\n  // FIXME: keep in sync with RecipesView.js until es6 imports are supported in web workers\n  const combineTokens = (sentence, combinedWords) => {\n    for (const token of combinedWords) {\n      const regexp = new RegExp(token, 'gi');\n      sentence = sentence.replace(regexp, token.replace(/ /g, '_'));\n    }\n\n    return sentence;\n  };\n\n  // FIXME: keep in sync with RecipesView.js until es6 imports are supported in web workers\n  const splitTokens = (sentence) => sentence.replace(/_/g, ' ');\n\n  const buildCounter = (iterable) => {\n    const counter = {};\n\n    iterable.forEach(item => {\n      if (!counter[item]) {\n        counter[item] = 1;\n      } else {\n        counter[item]++;\n      }\n    });\n\n    return counter;\n  }\n\n  const Counter = (iterable) => {\n    const _counter = buildCounter(iterable);\n\n    return {\n      mostCommon: (num) => {\n        return Object.entries(_counter)\n          .sort((a, b) => b[1] - a[1])\n          .map(pair => pair[0])\n          .slice(0, num);\n      },\n    };\n  }\n\n  const hasAny = (token, words) => {\n    for (const word of words) {\n      if (token.indexOf(word) !== -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  const getFilterTerms = ({ recipes, numFilters, words }) => {\n    const combineWords = new Set();\n    for (const word of words.combined) combineWords.add(word);\n    for (const word of words.brands) combineWords.add(word);\n    for (const word of words.spirits) combineWords.add(word);\n\n    const recipeWords = [];\n    recipes\n      .map(recipe => recipe.Ingredients)\n      .forEach(ingredients => {\n        ingredients\n          .split('\\n')\n          .filter(ingredient => !hasAny(ingredient, words.blacklist))\n          .forEach(ingredient => {\n            combineTokens(ingredient, combineWords)\n              .split(' ')\n              .map(word => word.replace(/\\([^)]*\\)/g, ''))\n              .map(word => splitTokens(word))\n              .map(word => word.replace(/[^a-zA-Z ]/g, ''))\n              .filter(word => word.length > 0)\n              .map(word => word.toLowerCase())\n              .filter(word => !hasAny(word, words.quantity))\n              .filter(word => !hasAny(word, words.ignored))\n              .forEach(word => recipeWords.push(word));\n        });\n      });\n\n    return Counter(recipeWords)\n      .mostCommon(numFilters)\n      .map(term => ({ term, enabled: false }));\n  }\n\n  self.addEventListener('message', event => { // eslint-disable-line no-restricted-globals\n    if (!event) {\n      return;\n    }\n\n    const filterTerms = getFilterTerms(event.data);\n\n    postMessage(filterTerms);\n  });\n}\n","const RECIPES_CACHE_KEY = 'recipesCache.recipes';\n\nconst FILTERTERMS_CACHE_KEY = 'recipesCache.filterTerms';\nconst FILTERTERMS_IS_DIRTY = 'recipesCache.filterTerms.dirty';\n\nconst IS_DIRTY = '1';\nconst NOT_DIRTY = '0';\n\nexport function storeFilterTerms(filterTerms) {\n  localStorage.setItem(FILTERTERMS_CACHE_KEY, JSON.stringify(filterTerms));\n  localStorage.setItem(FILTERTERMS_IS_DIRTY, NOT_DIRTY);\n}\n\nexport function loadFilterTerms() {\n  const cached = localStorage.getItem(FILTERTERMS_CACHE_KEY);\n  if (!cached) {\n    return null;\n  }\n\n  const isDirty = localStorage.getItem(FILTERTERMS_IS_DIRTY);\n  if (isDirty === IS_DIRTY) {\n    return null;\n  }\n\n  return JSON.parse(cached);\n}\n\nexport function storeRecipesData(newData) {\n  const oldData = loadRecipesData();\n\n  if (oldData && oldData.recipes.length === newData.recipes.length && oldData.words.length === newData.words.length) {\n    return;\n  }\n\n  localStorage.setItem(RECIPES_CACHE_KEY, JSON.stringify({\n    recipes: newData.recipes,\n    words: newData.words,\n    cacheDate: new Date().toString(),\n  }));\n\n  localStorage.setItem(FILTERTERMS_IS_DIRTY, IS_DIRTY);\n}\n\nexport function loadRecipesData() {\n  const cached = localStorage.getItem(RECIPES_CACHE_KEY);\n  if (!cached) {\n    return null;\n  }\n\n  return JSON.parse(cached);\n}\n","import React from 'react';\nimport Link from 'react-router-dom/Link';\nimport CheckBoxList from '../components/CheckBoxList';\nimport MultilineText from '../components/MultiLineText';\nimport PaginatedCardGroup from '../components/PaginatedCardGroup';\nimport RadioList from '../components/RadioList';\nimport SearchBar from '../components/SearchBar';\nimport StarRating from '../components/StarRating';\nimport WebWorker from '../workers/WebWorker';\nimport recipesWorker from '../workers/recipesWorker';\nimport { loadFilterTerms, storeFilterTerms } from '../utils/cache';\nimport i8n from '../i8n';\n\n// FIXME: keep in sync with recipesWorker.js until es6 imports are supported in web workers\nconst combineTokens = (sentence, combinedWords) => {\n  for (const token of combinedWords) {\n    const regexp = new RegExp(token, 'gi');\n    sentence = sentence.replace(regexp, token.replace(/ /g, '_'));\n  }\n\n  return sentence;\n};\n\n// FIXME: keep in sync with recipesWorker.js until es6 imports are supported in web workers\nconst splitTokens = (sentence) => sentence.replace(/_/g, ' ');\n\nconst hasAllFilterTerms = (recipe, filterTerms) => {\n  if (!filterTerms.length) {\n    return true;\n  }\n\n  const searchCorpus = splitTokens(recipe.Ingredients).toLowerCase();\n\n  return filterTerms\n    .filter(filterTerm => filterTerm.enabled)\n    .map(filterTerm => filterTerm.term.toLowerCase())\n    .every(searchValue => searchCorpus.indexOf(searchValue) !== -1);\n}\n\nconst hasFilterText = (recipe, filterText, words) => {\n  if (!filterText) {\n    return true;\n  }\n\n  const searchCorpus = combineTokens(`${recipe.Name}\\n${recipe.Ingredients}`.toLowerCase(), words.combined);\n\n  return filterText\n    .split('&&')\n    .map(searchTerm => searchTerm.trim())\n    .map(searchTerm => searchTerm.toLowerCase())\n    .every(searchTerm => searchCorpus.indexOf(searchTerm) !== -1);\n};\n\nconst sortOrders = [\n  {label: i8n.recipesSortByDate, value: \"date\"},\n  {label: i8n.recipesSortByRating, value: \"rating\", comparator: (recipeA, recipeB) => recipeB.Rating - recipeA.Rating},\n];\n\nconst recipeToCard = (recipe, i) => ({\n  key: `recipe-${i}-${recipe.Name}-${recipe.Ingredients}`,\n  header: recipe.Name,\n  description:\n    <Link to={`/recipes/${recipe.Name}`}>\n      <MultilineText text={splitTokens(recipe.Ingredients)} />\n    </Link>,\n  meta: <StarRating rating={recipe.Rating} />\n});\n\nconst filterToCheckbox = (filter) => ({\n  label: filter.term,\n  checked: filter.enabled\n});\n\nexport default class RecipesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortOrder: 'date',\n      filterText: props.query || '',\n      filterTerms: [],\n    };\n  }\n\n  onSearchTermToggle = (filterTerm) => {\n    const { filterTerms } = this.state;\n\n    const newFilterTerms = filterTerms\n      .map(({ term, enabled }) => term === filterTerm\n        ? ({ term, enabled: !enabled })\n        : ({ term, enabled }));\n\n    this.setState({ filterTerms: newFilterTerms });\n  }\n\n  onSearchTextChange = (filterText) => {\n    const { words } = this.props;\n\n    const newFilterText = combineTokens(filterText, words.combined);\n    this.setState({ filterText: newFilterText });\n  }\n\n  onSortOrderChange = (sortOrder) => {\n    this.setState({ sortOrder });\n  }\n\n  shouldShowRecipe = (recipe) => {\n    const { filterTerms, filterText } = this.state;\n    const { words } = this.props;\n\n    return hasAllFilterTerms(recipe, filterTerms) &&\n      hasFilterText(recipe, filterText, words);\n  }\n\n  sort = (recipes) => {\n    const { sortOrder } = this.state;\n\n    const comparator = sortOrders\n      .filter(order => order.value === sortOrder)\n      .map(order => order.comparator)[0];\n\n    if (comparator) {\n      recipes = recipes.sort(comparator);\n    }\n\n    return recipes;\n  }\n\n  componentDidMount() {\n    const filterTerms = loadFilterTerms();\n    if (filterTerms) {\n      this.setState({ filterTerms });\n      return;\n    }\n\n    const worker = new WebWorker(recipesWorker);\n    worker.postMessage(this.props);\n\n    worker.addEventListener('message', event => {\n      const filterTerms = event.data;\n      storeFilterTerms(filterTerms);\n      this.setState({ filterTerms });\n    });\n  }\n\n  render() {\n    const { recipes, recipesPerPage } = this.props;\n    const { filterTerms, filterText, sortOrder } = this.state;\n\n    const displayableRecipes = this.sort(recipes.filter(this.shouldShowRecipe));\n\n    return (\n      <div>\n        <div className=\"recipeControls\">\n          <CheckBoxList\n            className=\"filters\"\n            items={filterTerms.map(filterToCheckbox)}\n            onToggle={this.onSearchTermToggle}\n          />\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={i8n.recipesSearchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />\n          <RadioList\n            className=\"sortOrder\"\n            items={sortOrders}\n            checked={sortOrder}\n            onChange={this.onSortOrderChange}\n          />\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={recipesPerPage}\n          items={displayableRecipes.map(recipeToCard)}\n          key={displayableRecipes}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class SpiritsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.spirits}\n        searchPlaceholder={i8n.spiritsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json()\n}\n\nexport default function fetchJson(url) {\n  return fetch(url)\n    .then(checkStatus)\n    .then(parseJSON);\n}\n","import React from 'react';\nimport HashRouter from 'react-router-dom/HashRouter';\nimport Link from 'react-router-dom/Link';\nimport Redirect from 'react-router-dom/Redirect';\nimport Route from 'react-router-dom/Route';\nimport Switch from 'react-router-dom/Switch';\nimport Container from 'semantic-ui-react/dist/es/elements/Container/Container';\nimport Icon from 'semantic-ui-react/dist/es/elements/Icon/Icon';\nimport Menu from 'semantic-ui-react/dist/es/collections/Menu/Menu';\nimport Message from 'semantic-ui-react/dist/es/collections/Message/Message';\nimport BottlesView from './views/BottlesView';\nimport BrandsView from './views/BrandsView';\nimport RecipesView from './views/RecipesView';\nimport SpiritsView from './views/SpiritsView';\nimport { storeRecipesData, loadRecipesData } from './utils/cache';\nimport fetchJson from './utils/fetchJson';\nimport i8n from './i8n';\nimport 'semantic-ui-css/semantic.min.css';\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      recipes: [],\n      words: {},\n      cacheDate: '',\n    };\n  }\n\n  componentDidMount() {\n    const { recipesUrl, wordsUrl } = this.props;\n\n    Promise.all([fetchJson(recipesUrl), fetchJson(wordsUrl)])\n      .then(([recipes, words]) => {\n        this.onRecipesLoaded({ recipes, words });\n        storeRecipesData({ recipes, words });\n      })\n      .catch(error => {\n        const cached = loadRecipesData();\n        if (!cached) {\n          this.setState({ error });\n          return;\n        }\n\n        const { recipes, words, cacheDate } = cached;\n        this.onRecipesLoaded({ recipes, words }, cacheDate);\n      });\n  }\n\n  onRecipesLoaded = ({ recipes, words }, cacheDate) => {\n    this.setState({\n      recipes,\n      words: {\n        combined: new Set(words.combined || []),\n        blacklist: new Set(words.blacklist || []),\n        quantity: new Set(words.quantity || []),\n        brands: new Set(words.brands || []),\n        ignored: new Set(words.ignored || []),\n        spirits: new Set(words.spirits || []),\n      },\n      cacheDate,\n    });\n  }\n\n  onStaleDataWarningDismiss = () => {\n    this.setState({ cacheDate: '' });\n  }\n\n  renderIndex = (props) =>\n    <Redirect to=\"/recipes\" />\n\n  renderRecipes = (props) =>\n    <RecipesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      recipesPerPage={this.props.pageSize}\n      numFilters={this.props.numFilters}\n      key={props.match.params.query}\n    />\n\n  renderSpirits = (props) =>\n    <SpiritsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBrands = (props) =>\n    <BrandsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBottles = (props) =>\n    <BottlesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderStaleDataWarning = (props) => {\n    const { cacheDate } = props;\n    if (!cacheDate) {\n      return null;\n    }\n\n    return (\n      <Message warning floating icon onDismiss={this.onStaleDataWarningDismiss} className=\"messageTop\">\n        <Icon name=\"plug\" />\n        <Message.Content>\n          <Message.Header>{i8n.recipesLoadError}</Message.Header>\n          {i8n.recipesCacheWarning} {cacheDate}\n        </Message.Content>\n      </Message>\n    );\n  }\n\n  renderNav = (props) => {\n    const location = props.location.pathname;\n\n    return (\n      <Menu icon=\"labeled\" size=\"mini\" fixed=\"bottom\">\n        <Menu.Item as={Link} to=\"/recipes\" active={location.startsWith('/recipes')}>\n          <Icon name=\"cocktail\" />\n          {i8n.menuEntryRecipes}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/spirits\" active={location.startsWith('/spirits')}>\n          <Icon name=\"bar chart\" />\n          {i8n.menuEntrySpirits}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/brands\" active={location.startsWith('/brands')}>\n          <Icon name=\"line chart\" />\n          {i8n.menuEntryBrands}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/bottles\" active={location.startsWith('/bottles')}>\n          <Icon name=\"winner\" />\n          {i8n.menuEntryBottles}\n        </Menu.Item>\n      </Menu>\n    );\n  }\n\n  render() {\n    const { error, recipes, cacheDate } = this.state;\n\n    if (error) {\n      return (\n        <Container>\n          <Message error content={i8n.recipesLoadError} className=\"messageTop\" />\n        </Container>\n      );\n    }\n\n    if (recipes.length === 0) {\n      return null;\n    }\n\n    return (\n      <HashRouter>\n        <Container>\n          {this.renderStaleDataWarning({ cacheDate })}\n          <Route path=\"*\" component={this.renderNav} />\n          <Switch>\n            <Route exact path=\"/\" component={this.renderIndex} />\n            <Route exact path=\"/recipes/:query?\" render={this.renderRecipes} />\n            <Route exact path=\"/spirits/:query?\" render={this.renderSpirits} />\n            <Route exact path=\"/brands/:query?\" render={this.renderBrands} />\n            <Route exact path=\"/bottles/:query?\" render={this.renderBottles} />\n          </Switch>\n        </Container>\n      </HashRouter>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App\n    recipesUrl={process.env.REACT_APP_RECIPES_URL}\n    wordsUrl={process.env.REACT_APP_WORDS_URL}\n    pageSize={parseInt(process.env.REACT_APP_PAGE_SIZE, 10)}\n    numFilters={parseInt(process.env.REACT_APP_NUM_FILTERS, 10)}\n  />,\n  document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}