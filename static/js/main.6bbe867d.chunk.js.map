{"version":3,"sources":["components/PaginatedCardGroup.js","components/SearchBar.js","utils/MultiMap.js","i8n/en.js","i8n/index.js","components/AverageRatingsDisplay.js","utils/hashCode.js","utils/mean.js","views/BottlesView.js","views/BrandsView.js","components/CheckBoxList.js","components/MultiLineText.js","components/RadioList.js","components/StarRating.js","workers/WebWorker.js","workers/recipesWorker.js","utils/cache.js","views/RecipesView.js","views/SpiritsView.js","utils/fetchJson.js","App.js","serviceWorker.js","index.js"],"names":["PaginatedCardGroup","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onPageChange","event","activePage","setState","state","_this$props","items","itemsPerPage","className","totalPages","Math","ceil","length","pageStart","pageEnd","itemsOnPage","slice","react_default","a","createElement","Card","Group","Pagination","prevItem","nextItem","firstItem","lastItem","React","PureComponent","ON_CHANGE_DEBOUNCE_MS","SearchBar","onChange","value","_onChange","defaultValue","debounce","placeholder","Input","icon","Component","MultiMap","_map","key","item","push","func","entries","map","en","recipesCacheWarning","recipesLoadError","recipesSearchPlaceholder","recipesSortByDate","recipesSortByRating","meanRatingSupport","meanRatingValue","brandsSearchPlaceholder","spiritsSearchPlaceholder","bottlesSpiritSelectPlaceholder","menuEntryRecipes","menuEntrySpirits","menuEntryBrands","menuEntryBottles","colors","toMeanCard","_ref","name","mean","support","color","abs","str","hash","i","charCodeAt","hashCode","randomColor","header","description","Link_default","to","concat","Statistic","label","i8n","toFixed","AverageRatingsDisplay","onSearchTextChange","filterText","query","aggregations","recipes","ratingsPerPage","searchPlaceholder","ratingsFilter","startsWith","maxSupport","parseInt","substr","_ref4","minSupport","_ref5","searchTerms","toLowerCase","split","searchTerm","trim","_ref6","some","indexOf","buildRatingsFilter","meanRatings","aggregationToRatings","forEach","aggregation","filter","recipe","Ingredients","add","Rating","_ref2","numbers","_ref3","slicedToArray","ratings","reduce","prev","cur","sum","sort","b","sign","toMean","SearchBar_SearchBar","PaginatedCardGroup_PaginatedCardGroup","BottlesView","onSpiritChange","selectedSpirit","words","BottlesView_SpiritsSelector","spirits","BottlesView_TopBottlesDisplay","spirit","SpiritsSelector","e","_this2","_this$props2","options","Array","from","text","Dropdown","search","selection","TopBottlesDisplay","_this$props3","AverageRatingsDisplay_AverageRatingsDisplay","spiritMatcher","RegExp","bottles","Set","ingredient","match","replace","bottle","getBottlesForSpirit","BrandsView","brands","CheckBoxList","onToggle","List","horizontal","Item","Checkbox","checked","MultilineText","lines","line","pop","textToLines","RadioList","Radio","StarRating","rating","defaultRating","maxRating","disabled","WebWorker","worker","code","toString","blob","Blob","Worker","URL","createObjectURL","recipesWorker","hasAny","token","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","Symbol","iterator","next","done","word","err","return","getFilterTerms","numFilters","combineWords","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","combined","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","recipeWords","ingredients","blacklist","sentence","combinedWords","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","regexp","combineTokens","quantity","ignored","iterable","_counter","counter","buildCounter","mostCommon","num","pair","Counter","term","enabled","self","addEventListener","filterTerms","data","postMessage","RECIPES_CACHE_KEY","FILTERTERMS_CACHE_KEY","FILTERTERMS_IS_DIRTY","IS_DIRTY","NOT_DIRTY","loadRecipesData","cached","localStorage","getItem","JSON","parse","splitTokens","hasAllFilterTerms","searchCorpus","filterTerm","every","searchValue","hasFilterText","Name","sortOrders","comparator","recipeA","recipeB","recipeToCard","MultiLineText_MultilineText","meta","StarRating_StarRating","filterToCheckbox","RecipesView","onSearchTermToggle","newFilterTerms","newFilterText","onSortOrderChange","sortOrder","shouldShowRecipe","_this$state","order","loadFilterTerms","setItem","stringify","storeFilterTerms","recipesPerPage","_this$state2","displayableRecipes","CheckBoxList_CheckBoxList","RadioList_RadioList","SpiritsView","checkStatus","response","status","error","Error","statusText","parseJSON","json","fetchJson","url","fetch","then","App","onRecipesLoaded","cacheDate","onStaleDataWarningDismiss","renderIndex","Redirect_default","renderRecipes","RecipesView_RecipesView","params","pageSize","renderSpirits","SpiritsView_SpiritsView","renderBrands","BrandsView_BrandsView","renderBottles","BottlesView_BottlesView","renderStaleDataWarning","Message","warning","floating","onDismiss","Icon","Content","Header","renderNav","location","pathname","Menu","size","fixed","as","Link","active","recipesUrl","wordsUrl","Promise","all","newData","oldData","Date","storeRecipesData","catch","Container","content","HashRouter_default","Route_default","path","component","Switch_default","exact","render","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","ReactDOM","App_App","process","document","getElementById","href","origin","contentType","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6bbe867d.chunk.js","sourcesContent":["import React from 'react';\nimport Card from 'semantic-ui-react/dist/es/views/Card/Card';\nimport Pagination from 'semantic-ui-react/dist/es/addons/Pagination/Pagination';\n\nexport default class PaginatedCardGroup extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activePage: 1\n    };\n  }\n\n  onPageChange = (event, props) => {\n    const { activePage } = props;\n    this.setState({ activePage });\n  }\n\n  render() {\n    const { activePage } = this.state;\n    const { items, itemsPerPage, className } = this.props;\n\n    const totalPages = Math.ceil(items.length / itemsPerPage);\n    const pageStart = (activePage - 1) * itemsPerPage;\n    const pageEnd = pageStart + itemsPerPage;\n    const itemsOnPage = items.slice(pageStart, pageEnd);\n\n    return (\n      <div className={className}>\n        <div className=\"group\">\n          <Card.Group items={itemsOnPage} />\n        </div>\n        <div className=\"pagination\">\n          <Pagination\n            prevItem={null}\n            nextItem={null}\n            firstItem={null}\n            lastItem={null}\n            activePage={activePage}\n            onPageChange={this.onPageChange}\n            totalPages={totalPages}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Input from 'semantic-ui-react/dist/es/elements/Input/Input';\nimport debounce from 'lodash.debounce';\n\nconst ON_CHANGE_DEBOUNCE_MS = 250;\n\nexport default class SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n    };\n\n    this._onChange = debounce(props.onChange, ON_CHANGE_DEBOUNCE_MS);\n  }\n\n  onChange = (event, props) => {\n    const { value } = props;\n\n    this.setState({ value }, () => this._onChange(value));\n  }\n\n  render() {\n    const { placeholder, className } = this.props;\n    const { value } = this.state;\n\n    return (\n      <div className={className}>\n        <Input\n          icon=\"search\"\n          value={value}\n          placeholder={placeholder}\n          onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n","export default class MultiMap {\n  constructor() {\n    this._map = {};\n  }\n\n  add(key, item) {\n    if (!this._map[key]) this._map[key] = [];\n    this._map[key].push(item);\n  }\n\n  get(key) {\n    return this._map[key] || [];\n  }\n\n  map(func) {\n    return Object.entries(this._map).map(func);\n  }\n}\n","export default {\n  recipesCacheWarning: 'Using cached recipes, last updated:',\n  recipesLoadError: 'Something went wrong while loading the recipes',\n  recipesSearchPlaceholder: 'Search for recipes...',\n  recipesSortByDate: 'Sort by date',\n  recipesSortByRating: 'Sort by rating',\n  meanRatingSupport: 'Cocktails',\n  meanRatingValue: 'Avg Rating',\n  brandsSearchPlaceholder: 'Search for brands...',\n  spiritsSearchPlaceholder: 'Search for spirits...',\n  bottlesSpiritSelectPlaceholder: 'Select spirit...',\n  menuEntryRecipes: 'Recipes',\n  menuEntrySpirits: 'Top Spirits',\n  menuEntryBrands: 'Top brands',\n  menuEntryBottles: 'Top bottles',\n};\n","import en from './en';\n\nexport default en;\n","import React from 'react';\nimport Link from 'react-router-dom/Link';\nimport Statistic from 'semantic-ui-react/dist/es/views/Statistic/Statistic';\nimport PaginatedCardGroup from './PaginatedCardGroup';\nimport SearchBar from './SearchBar';\nimport MultiMap from '../utils/MultiMap';\nimport mean from '../utils/mean';\nimport hashCode from '../utils/hashCode';\nimport i8n from '../i8n';\n\nconst colors = ['orange', 'yellow', 'olive', 'green', 'teal', 'blue', 'violet', 'purple', 'pink', 'brown'];\n\nconst randomColor = (name) => colors[Math.abs(hashCode(name)) % colors.length];\n\nconst toMeanCard = ({ name, mean, support }) => {\n  const color = randomColor(name);\n\n  return {\n    key: name,\n    header: name,\n    color,\n    description:\n      <Link to={`/recipes/${name}`}>\n        <Statistic.Group>\n          <Statistic label={i8n.meanRatingSupport} value={support} color={color} />\n          <Statistic label={i8n.meanRatingValue} value={mean.toFixed(2)} color={color} />\n        </Statistic.Group>\n      </Link>\n  };\n}\n\nconst toMean = (recipes, aggregations) => {\n  const aggregationToRatings = new MultiMap();\n  aggregations.forEach(aggregation =>\n    recipes.filter(recipe => recipe.Ingredients.toLowerCase().indexOf(aggregation.toLowerCase()) !== -1).forEach(recipe =>\n      aggregationToRatings.add(aggregation, recipe.Rating)));\n\n  return aggregationToRatings\n    .map(([name, ratings]) => ({ name, mean: mean(ratings), support: ratings.length }))\n    .sort((a, b) => Math.sign(b.mean - a.mean));\n}\n\nconst buildRatingsFilter = (filterText) => {\n  if (filterText.startsWith('#<')) {\n    const maxSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support < maxSupport;\n  }\n\n  if (filterText.startsWith('#>')) {\n    const minSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support > minSupport;\n  }\n\n  if (filterText.length > 0) {\n    const searchTerms = filterText.toLowerCase().split('||').map(searchTerm => searchTerm.trim());\n    return ({ name }) => searchTerms.some(searchTerm => name.toLowerCase().indexOf(searchTerm) !== -1);\n  }\n\n  return () => true;\n}\n\nexport default class AverageRatingsDisplay extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filterText: props.query || ''\n    };\n  }\n\n  onSearchTextChange = (filterText) => {\n    this.setState({ filterText });\n  }\n\n  render() {\n    const { aggregations, recipes, ratingsPerPage, searchPlaceholder } = this.props;\n    const { filterText } = this.state;\n\n    const ratingsFilter = buildRatingsFilter(filterText);\n    const meanRatings = toMean(recipes, aggregations).filter(ratingsFilter);\n\n    return (\n      <div>\n        <div className=\"brandControls\">\n          {searchPlaceholder &&\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={searchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />}\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={ratingsPerPage}\n          items={meanRatings.map(toMeanCard)}\n          key={meanRatings}\n        />\n      </div>\n    );\n  }\n}\n","export default function hashCode(str) {\n  let hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    let chr = str.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0;\n  }\n\n  return hash;\n}\n","function sum(numbers) {\n  return numbers.reduce((prev, cur) => prev + cur, 0);\n}\n\nexport default function mean(numbers) {\n  return sum(numbers) / numbers.length;\n}\n","import React from 'react';\nimport Dropdown from 'semantic-ui-react/dist/es/modules/Dropdown/Dropdown';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nfunction getBottlesForSpirit(spirit, recipes) {\n  const spiritMatcher = new RegExp(`\\\\s${spirit}(\\\\s|$)`, 'i');\n\n  const bottles = new Set();\n\n  recipes.forEach(recipe =>\n    recipe.Ingredients\n      .split('\\n')\n      .filter(ingredient => ingredient.match(spiritMatcher) != null)\n      .map(ingredient => ingredient.replace(/\\([^)]*\\)/g, ''))\n      .map(ingredient => ingredient.replace(/^[^ ]*/, ''))\n      .map(ingredient => ingredient.trim())\n      .forEach(bottle => bottles.add(bottle)));\n\n  return Array.from(bottles).sort();\n}\n\nexport default class BottlesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedSpirit: props.query\n    };\n  }\n\n  onSpiritChange = (selectedSpirit) => this.setState({ selectedSpirit });\n\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n    const { selectedSpirit } = this.state;\n\n    return (\n      <div>\n        <div className=\"bottleControls\">\n          <SpiritsSelector\n            selectedSpirit={selectedSpirit}\n            spirits={words.spirits}\n            onChange={this.onSpiritChange}\n          />\n        </div>\n        <TopBottlesDisplay\n          spirit={selectedSpirit}\n          recipes={recipes}\n          ratingsPerPage={ratingsPerPage}\n        />\n      </div>\n    );\n  }\n}\n\nclass SpiritsSelector extends React.PureComponent {\n  onChange = (e, { value }) => this.props.onChange(value);\n\n  render() {\n    const { spirits, selectedSpirit } = this.props;\n\n    const options = Array.from(spirits).sort().map(spirit => ({ text: spirit, value: spirit }));\n\n    return (\n      <Dropdown\n        search\n        selection\n        placeholder={i8n.bottlesSpiritSelectPlaceholder}\n        options={options}\n        onChange={this.onChange}\n        defaultValue={selectedSpirit}\n      />\n    );\n  }\n}\n\nclass TopBottlesDisplay extends React.PureComponent {\n  render() {\n    const { spirit, recipes, ratingsPerPage } = this.props;\n\n    if (!spirit) {\n      return null;\n    }\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={getBottlesForSpirit(spirit, recipes)}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class BrandsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.brands}\n        searchPlaceholder={i8n.brandsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport Checkbox from 'semantic-ui-react/dist/es/modules/Checkbox/Checkbox';\nimport List from 'semantic-ui-react/dist/es/elements/List/List';\n\nexport default class CheckBoxList extends React.PureComponent {\n  onToggle = (event, props) => {\n    this.props.onToggle(props.label);\n  }\n\n  render() {\n    const { items, className } = this.props;\n\n    return (\n      <div className={className}>\n        <List horizontal>\n          {items.map(item =>\n            <List.Item key={item.label}>\n              <Checkbox\n                label={item.label}\n                checked={item.checked}\n                onChange={this.onToggle}\n              />\n            </List.Item>\n          )}\n        </List>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nconst textToLines = (text) => {\n  const lines = [];\n\n  text.split('\\n').forEach((line, i) => {\n    lines.push(<span key={`line-${i}`}>{line}</span>);\n    lines.push(<br key={`newline-${i}`} />);\n  });\n  lines.pop();\n\n  return lines;\n}\n\nexport default class MultilineText extends React.PureComponent {\n  render() {\n    const { text } = this.props;\n\n    return <div>{textToLines(text)}</div>;\n  }\n}\n","import React from 'react';\nimport List from 'semantic-ui-react/dist/es/elements/List/List';\nimport Radio from 'semantic-ui-react/dist/es/addons/Radio/Radio';\n\nexport default class RadioList extends React.PureComponent {\n  onChange = (event, props) => {\n    this.props.onChange(props.value);\n  }\n\n  render() {\n    const { items, checked, className } = this.props;\n\n    return (\n      <div className={className}>\n        <List horizontal>\n          {items.map(item =>\n            <List.Item key={item.value}>\n              <Radio\n                label={item.label}\n                value={item.value}\n                checked={checked === item.value}\n                onChange={this.onChange}\n              />\n            </List.Item>\n          )}\n        </List>\n      </div>\n    );\n  };\n}\n","import React from 'react';\nimport Rating from 'semantic-ui-react/dist/es/modules/Rating/Rating';\n\nconst maxRating = 5;\n\nexport default class StarRating extends React.PureComponent {\n  render() {\n    const { rating } = this.props;\n\n    return (\n      <Rating\n        icon='star'\n        defaultRating={rating}\n        maxRating={maxRating}\n        disabled\n      />\n    );\n  }\n}\n","export default class WebWorker {\n  constructor(worker) {\n    const code = worker.toString();\n    const blob = new Blob([`(${code})()`]);\n    return new Worker(URL.createObjectURL(blob));\n  }\n}\n","export default () => {\n  // FIXME: keep in sync with RecipesView.js until es6 imports are supported in web workers\n  const combineTokens = (sentence, combinedWords) => {\n    for (const token of combinedWords) {\n      const regexp = new RegExp(token, 'gi');\n      sentence = sentence.replace(regexp, token.replace(/ /g, '_'));\n    }\n\n    return sentence;\n  };\n\n  // FIXME: keep in sync with RecipesView.js until es6 imports are supported in web workers\n  const splitTokens = (sentence) => sentence.replace(/_/g, ' ');\n\n  const buildCounter = (iterable) => {\n    const counter = {};\n\n    iterable.forEach(item => {\n      if (!counter[item]) {\n        counter[item] = 1;\n      } else {\n        counter[item]++;\n      }\n    });\n\n    return counter;\n  }\n\n  const Counter = (iterable) => {\n    const _counter = buildCounter(iterable);\n\n    return {\n      mostCommon: (num) => {\n        return Object.entries(_counter)\n          .sort((a, b) => b[1] - a[1])\n          .map(pair => pair[0])\n          .slice(0, num);\n      },\n    };\n  }\n\n  const hasAny = (token, words) => {\n    for (const word of words) {\n      if (token.indexOf(word) !== -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  const getFilterTerms = ({ recipes, numFilters, words }) => {\n    const combineWords = new Set();\n    for (const word of words.combined) combineWords.add(word);\n    for (const word of words.brands) combineWords.add(word);\n    for (const word of words.spirits) combineWords.add(word);\n\n    const recipeWords = [];\n    recipes\n      .map(recipe => recipe.Ingredients)\n      .forEach(ingredients => {\n        ingredients\n          .split('\\n')\n          .filter(ingredient => !hasAny(ingredient, words.blacklist))\n          .forEach(ingredient => {\n            combineTokens(ingredient, combineWords)\n              .split(' ')\n              .map(word => word.replace(/\\([^)]*\\)/g, ''))\n              .map(word => splitTokens(word))\n              .map(word => word.replace(/[^a-zA-Z ]/g, ''))\n              .filter(word => word.length > 0)\n              .map(word => word.toLowerCase())\n              .filter(word => !hasAny(word, words.quantity))\n              .filter(word => !hasAny(word, words.ignored))\n              .forEach(word => recipeWords.push(word));\n        });\n      });\n\n    return Counter(recipeWords)\n      .mostCommon(numFilters)\n      .map(term => ({ term, enabled: false }));\n  }\n\n  self.addEventListener('message', event => { // eslint-disable-line no-restricted-globals\n    if (!event) {\n      return;\n    }\n\n    const filterTerms = getFilterTerms(event.data);\n\n    postMessage(filterTerms);\n  });\n}\n","const RECIPES_CACHE_KEY = 'recipesCache.recipes';\n\nconst FILTERTERMS_CACHE_KEY = 'recipesCache.filterTerms';\nconst FILTERTERMS_IS_DIRTY = 'recipesCache.filterTerms.dirty';\n\nconst IS_DIRTY = '1';\nconst NOT_DIRTY = '0';\n\nexport function storeFilterTerms(filterTerms) {\n  localStorage.setItem(FILTERTERMS_CACHE_KEY, JSON.stringify(filterTerms));\n  localStorage.setItem(FILTERTERMS_IS_DIRTY, NOT_DIRTY);\n}\n\nexport function loadFilterTerms() {\n  const cached = localStorage.getItem(FILTERTERMS_CACHE_KEY);\n  if (!cached) {\n    return null;\n  }\n\n  const isDirty = localStorage.getItem(FILTERTERMS_IS_DIRTY);\n  if (isDirty === IS_DIRTY) {\n    return null;\n  }\n\n  return JSON.parse(cached);\n}\n\nexport function storeRecipesData(newData) {\n  const oldData = loadRecipesData();\n\n  if (oldData && oldData.recipes.length === newData.recipes.length && oldData.words.length === newData.words.length) {\n    return;\n  }\n\n  localStorage.setItem(RECIPES_CACHE_KEY, JSON.stringify({\n    recipes: newData.recipes,\n    words: newData.words,\n    cacheDate: new Date().toString(),\n  }));\n\n  localStorage.setItem(FILTERTERMS_IS_DIRTY, IS_DIRTY);\n}\n\nexport function loadRecipesData() {\n  const cached = localStorage.getItem(RECIPES_CACHE_KEY);\n  if (!cached) {\n    return null;\n  }\n\n  return JSON.parse(cached);\n}\n","import React from 'react';\nimport Link from 'react-router-dom/Link';\nimport CheckBoxList from '../components/CheckBoxList';\nimport MultilineText from '../components/MultiLineText';\nimport PaginatedCardGroup from '../components/PaginatedCardGroup';\nimport RadioList from '../components/RadioList';\nimport SearchBar from '../components/SearchBar';\nimport StarRating from '../components/StarRating';\nimport WebWorker from '../workers/WebWorker';\nimport recipesWorker from '../workers/recipesWorker';\nimport { loadFilterTerms, storeFilterTerms } from '../utils/cache';\nimport i8n from '../i8n';\n\n// FIXME: keep in sync with recipesWorker.js until es6 imports are supported in web workers\nconst combineTokens = (sentence, combinedWords) => {\n  for (const token of combinedWords) {\n    const regexp = new RegExp(token, 'gi');\n    sentence = sentence.replace(regexp, token.replace(/ /g, '_'));\n  }\n\n  return sentence;\n};\n\n// FIXME: keep in sync with recipesWorker.js until es6 imports are supported in web workers\nconst splitTokens = (sentence) => sentence.replace(/_/g, ' ');\n\nconst hasAllFilterTerms = (recipe, filterTerms) => {\n  if (!filterTerms.length) {\n    return true;\n  }\n\n  const searchCorpus = splitTokens(recipe.Ingredients).toLowerCase();\n\n  return filterTerms\n    .filter(filterTerm => filterTerm.enabled)\n    .map(filterTerm => filterTerm.term.toLowerCase())\n    .every(searchValue => searchCorpus.indexOf(searchValue) !== -1);\n}\n\nconst hasFilterText = (recipe, filterText, words) => {\n  if (!filterText) {\n    return true;\n  }\n\n  const searchCorpus = combineTokens(`${recipe.Name}\\n${recipe.Ingredients}`.toLowerCase(), words.combined);\n\n  return filterText\n    .split('&&')\n    .map(searchTerm => searchTerm.trim())\n    .map(searchTerm => searchTerm.toLowerCase())\n    .every(searchTerm => searchCorpus.indexOf(searchTerm) !== -1);\n};\n\nconst sortOrders = [\n  {label: i8n.recipesSortByDate, value: \"date\"},\n  {label: i8n.recipesSortByRating, value: \"rating\", comparator: (recipeA, recipeB) => recipeB.Rating - recipeA.Rating},\n];\n\nconst recipeToCard = (recipe, i) => ({\n  key: `recipe-${i}-${recipe.Name}-${recipe.Ingredients}`,\n  header: recipe.Name,\n  description:\n    <Link to={`/recipes/${recipe.Name}`}>\n      <MultilineText text={splitTokens(recipe.Ingredients)} />\n    </Link>,\n  meta: <StarRating rating={recipe.Rating} />\n});\n\nconst filterToCheckbox = (filter) => ({\n  label: filter.term,\n  checked: filter.enabled\n});\n\nexport default class RecipesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortOrder: 'date',\n      filterText: props.query || '',\n      filterTerms: [],\n    };\n  }\n\n  onSearchTermToggle = (filterTerm) => {\n    const { filterTerms } = this.state;\n\n    const newFilterTerms = filterTerms\n      .map(({ term, enabled }) => term === filterTerm\n        ? ({ term, enabled: !enabled })\n        : ({ term, enabled }));\n\n    this.setState({ filterTerms: newFilterTerms });\n  }\n\n  onSearchTextChange = (filterText) => {\n    const { words } = this.props;\n\n    const newFilterText = combineTokens(filterText, words.combined);\n    this.setState({ filterText: newFilterText });\n  }\n\n  onSortOrderChange = (sortOrder) => {\n    this.setState({ sortOrder });\n  }\n\n  shouldShowRecipe = (recipe) => {\n    const { filterTerms, filterText } = this.state;\n    const { words } = this.props;\n\n    return hasAllFilterTerms(recipe, filterTerms) &&\n      hasFilterText(recipe, filterText, words);\n  }\n\n  sort = (recipes) => {\n    const { sortOrder } = this.state;\n\n    const comparator = sortOrders\n      .filter(order => order.value === sortOrder)\n      .map(order => order.comparator)[0];\n\n    if (comparator) {\n      recipes = recipes.sort(comparator);\n    }\n\n    return recipes;\n  }\n\n  componentDidMount() {\n    const filterTerms = loadFilterTerms();\n    if (filterTerms) {\n      this.setState({ filterTerms });\n      return;\n    }\n\n    const worker = new WebWorker(recipesWorker);\n    worker.postMessage(this.props);\n\n    worker.addEventListener('message', event => {\n      const filterTerms = event.data;\n      storeFilterTerms(filterTerms);\n      this.setState({ filterTerms });\n    });\n  }\n\n  render() {\n    const { recipes, recipesPerPage } = this.props;\n    const { filterTerms, filterText, sortOrder } = this.state;\n\n    const displayableRecipes = this.sort(recipes.filter(this.shouldShowRecipe));\n\n    return (\n      <div>\n        <div className=\"recipeControls\">\n          <CheckBoxList\n            className=\"filters\"\n            items={filterTerms.map(filterToCheckbox)}\n            onToggle={this.onSearchTermToggle}\n          />\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={i8n.recipesSearchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />\n          <RadioList\n            className=\"sortOrder\"\n            items={sortOrders}\n            checked={sortOrder}\n            onChange={this.onSortOrderChange}\n          />\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={recipesPerPage}\n          items={displayableRecipes.map(recipeToCard)}\n          key={displayableRecipes}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class SpiritsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.spirits}\n        searchPlaceholder={i8n.spiritsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json()\n}\n\nexport default function fetchJson(url) {\n  return fetch(url)\n    .then(checkStatus)\n    .then(parseJSON);\n}\n","import React from 'react';\nimport HashRouter from 'react-router-dom/HashRouter';\nimport Link from 'react-router-dom/Link';\nimport Redirect from 'react-router-dom/Redirect';\nimport Route from 'react-router-dom/Route';\nimport Switch from 'react-router-dom/Switch';\nimport Container from 'semantic-ui-react/dist/es/elements/Container/Container';\nimport Icon from 'semantic-ui-react/dist/es/elements/Icon/Icon';\nimport Menu from 'semantic-ui-react/dist/es/collections/Menu/Menu';\nimport Message from 'semantic-ui-react/dist/es/collections/Message/Message';\nimport BottlesView from './views/BottlesView';\nimport BrandsView from './views/BrandsView';\nimport RecipesView from './views/RecipesView';\nimport SpiritsView from './views/SpiritsView';\nimport { storeRecipesData, loadRecipesData } from './utils/cache';\nimport fetchJson from './utils/fetchJson';\nimport i8n from './i8n';\nimport 'semantic-ui-css/semantic.min.css';\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      recipes: [],\n      words: {},\n      cacheDate: '',\n    };\n  }\n\n  componentDidMount() {\n    const { recipesUrl, wordsUrl } = this.props;\n\n    Promise.all([fetchJson(recipesUrl), fetchJson(wordsUrl)])\n      .then(([recipes, words]) => {\n        this.onRecipesLoaded({ recipes, words });\n        storeRecipesData({ recipes, words });\n      })\n      .catch(error => {\n        const cached = loadRecipesData();\n        if (!cached) {\n          this.setState({ error });\n          return;\n        }\n\n        const { recipes, words, cacheDate } = cached;\n        this.onRecipesLoaded({ recipes, words }, cacheDate);\n      });\n  }\n\n  onRecipesLoaded = ({ recipes, words }, cacheDate) => {\n    this.setState({\n      recipes,\n      words: {\n        combined: new Set(words.combined || []),\n        blacklist: new Set(words.blacklist || []),\n        quantity: new Set(words.quantity || []),\n        brands: new Set(words.brands || []),\n        ignored: new Set(words.ignored || []),\n        spirits: new Set(words.spirits || []),\n      },\n      cacheDate,\n    });\n  }\n\n  onStaleDataWarningDismiss = () => {\n    this.setState({ cacheDate: '' });\n  }\n\n  renderIndex = (props) =>\n    <Redirect to=\"/recipes\" />\n\n  renderRecipes = (props) =>\n    <RecipesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      recipesPerPage={this.props.pageSize}\n      numFilters={this.props.numFilters}\n      key={props.match.params.query}\n    />\n\n  renderSpirits = (props) =>\n    <SpiritsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBrands = (props) =>\n    <BrandsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBottles = (props) =>\n    <BottlesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderStaleDataWarning = (props) => {\n    const { cacheDate } = props;\n    if (!cacheDate) {\n      return null;\n    }\n\n    return (\n      <Message warning floating icon onDismiss={this.onStaleDataWarningDismiss} className=\"messageTop\">\n        <Icon name=\"plug\" />\n        <Message.Content>\n          <Message.Header>{i8n.recipesLoadError}</Message.Header>\n          {i8n.recipesCacheWarning} {cacheDate}\n        </Message.Content>\n      </Message>\n    );\n  }\n\n  renderNav = (props) => {\n    const location = props.location.pathname;\n\n    return (\n      <Menu icon=\"labeled\" size=\"mini\" fixed=\"bottom\">\n        <Menu.Item as={Link} to=\"/recipes\" active={location.startsWith('/recipes')}>\n          <Icon name=\"cocktail\" />\n          {i8n.menuEntryRecipes}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/spirits\" active={location.startsWith('/spirits')}>\n          <Icon name=\"bar chart\" />\n          {i8n.menuEntrySpirits}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/brands\" active={location.startsWith('/brands')}>\n          <Icon name=\"line chart\" />\n          {i8n.menuEntryBrands}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/bottles\" active={location.startsWith('/bottles')}>\n          <Icon name=\"winner\" />\n          {i8n.menuEntryBottles}\n        </Menu.Item>\n      </Menu>\n    );\n  }\n\n  render() {\n    const { error, recipes, cacheDate } = this.state;\n\n    if (error) {\n      return (\n        <Container>\n          <Message error content={i8n.recipesLoadError} className=\"messageTop\" />\n        </Container>\n      );\n    }\n\n    if (recipes.length === 0) {\n      return null;\n    }\n\n    return (\n      <HashRouter>\n        <Container>\n          {this.renderStaleDataWarning({ cacheDate })}\n          <Route path=\"*\" component={this.renderNav} />\n          <Switch>\n            <Route exact path=\"/\" component={this.renderIndex} />\n            <Route exact path=\"/recipes/:query?\" render={this.renderRecipes} />\n            <Route exact path=\"/spirits/:query?\" render={this.renderSpirits} />\n            <Route exact path=\"/brands/:query?\" render={this.renderBrands} />\n            <Route exact path=\"/bottles/:query?\" render={this.renderBottles} />\n          </Switch>\n        </Container>\n      </HashRouter>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App\n    recipesUrl={process.env.REACT_APP_RECIPES_URL}\n    wordsUrl={process.env.REACT_APP_WORDS_URL}\n    pageSize={parseInt(process.env.REACT_APP_PAGE_SIZE, 10)}\n    numFilters={parseInt(process.env.REACT_APP_NUM_FILTERS, 10)}\n  />,\n  document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}