(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{298:function(e,t,r){e.exports=r(535)},533:function(e,t,r){},535:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(65),c=r.n(i),o=r(54),s=r(11),l=r(12),u=r(15),p=r(14),h=r(16),m=r(264),f=r.n(m),d=r(67),g=r.n(d),v=r(265),b=r.n(v),w=r(68),O=r.n(w),E=r(266),y=r.n(E),j=r(183),S=r(23),P=r(55),C=r(92),k=r(292),x=r(134),T=r(293),N=r(295),R=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e))).onPageChange=function(e,t){var n=t.activePage;r.setState({activePage:n})},r.state={activePage:1},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({activePage:1})}},{key:"render",value:function(){var e=this.state.activePage,t=this.props,r=t.items,n=t.itemsPerPage,i=t.className,c=Math.ceil(r.length/n),o=(e-1)*n,s=o+n,l=r.slice(o,s);return a.a.createElement("div",{className:i},a.a.createElement("div",{className:"group"},a.a.createElement(T.a.Group,{items:l})),a.a.createElement("div",{className:"pagination"},a.a.createElement(N.a,{prevItem:null,nextItem:null,firstItem:null,lastItem:null,activePage:e,onPageChange:this.onPageChange,totalPages:c})))}}]),t}(a.a.PureComponent),I=r(294),W=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e,t){r.props.onChange(t.value)},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.defaultValue,n=e.className;return a.a.createElement("div",{className:n},a.a.createElement(I.a,{icon:"search",defaultValue:r,placeholder:t,onChange:this.onChange}))}}]),t}(a.a.Component),D=function(){function e(){Object(s.a)(this,e),this._map={}}return Object(l.a)(e,[{key:"add",value:function(e,t){this._map[e]||(this._map[e]=[]),this._map[e].push(t)}},{key:"get",value:function(e){return this._map[e]||[]}},{key:"map",value:function(e){return Object.entries(this._map).map(e)}}]),e}();var q={recipesCacheWarning:"Using cached recipes, last updated:",recipesLoadError:"Something went wrong while loading the recipes",recipesSearchPlaceholder:"Search for recipes...",recipesSortByDate:"Sort by date",recipesSortByRating:"Sort by rating",meanRatingSupport:"Cocktails",meanRatingValue:"Avg Rating",brandsSearchPlaceholder:"Search for brands...",spiritsSearchPlaceholder:"Search for spirits...",bottlesSpiritSelectPlaceholder:"Select spirit...",menuEntryRecipes:"Recipes",menuEntrySpirits:"Top Spirits",menuEntryBrands:"Top brands",menuEntryBottles:"Top bottles"},L=["orange","yellow","olive","green","teal","blue","violet","purple","pink","brown"],B=function(e){var t=e.name,r=e.mean,n=e.support,i=function(e){return L[Math.abs(function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(e))%L.length]}(t);return{key:t,header:t,color:i,description:a.a.createElement(g.a,{to:"/recipes/".concat(t)},a.a.createElement(x.a.Group,null,a.a.createElement(x.a,{label:q.meanRatingSupport,value:n,color:i}),a.a.createElement(x.a,{label:q.meanRatingValue,value:r.toFixed(2),color:i})))}},A=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSearchTextChange=function(e){r.setState({filterText:e})},r.state={filterText:e.query||""},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.aggregations,r=e.recipes,n=e.ratingsPerPage,i=e.searchPlaceholder,c=this.state.filterText,s=function(e){if(e.startsWith("#<")){var t=parseInt(e.substr(2),10);return function(e){return e.support<t}}if(e.startsWith("#>")){var r=parseInt(e.substr(2),10);return function(e){return e.support>r}}if(e.length>0){var n=e.toLowerCase().split("||").map(function(e){return e.trim()});return function(e){var t=e.name;return n.some(function(e){return-1!==t.toLowerCase().indexOf(e)})}}return function(){return!0}}(c),l=function(e,t){var r=new D;return t.forEach(function(t){return e.filter(function(e){return-1!==e.Ingredients.toLowerCase().indexOf(t.toLowerCase())}).forEach(function(e){return r.add(t,e.Rating)})}),r.map(function(e){var t,r=Object(o.a)(e,2),n=r[0],a=r[1];return{name:n,mean:(t=a,function(e){return e.reduce(function(e,t){return e+t},0)}(t)/t.length),support:a.length}}).sort(function(e,t){return Math.sign(t.mean-e.mean)})}(r,t).filter(s);return a.a.createElement("div",null,a.a.createElement("div",{className:"brandControls"},i&&a.a.createElement(W,{className:"searchBar",defaultValue:c,placeholder:i,onChange:this.onSearchTextChange})),a.a.createElement(R,{className:"paginatedCardGroup",itemsPerPage:n,items:l.map(B)}))}}]),t}(a.a.PureComponent);var _=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSpiritChange=function(e){return r.setState({selectedSpirit:e})},r.state={selectedSpirit:e.query},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.words,r=e.recipes,n=e.ratingsPerPage,i=this.state.selectedSpirit;return a.a.createElement("div",null,a.a.createElement("div",{className:"bottleControls"},a.a.createElement(z,{selectedSpirit:i,spirits:t.spirits,onChange:this.onSpiritChange})),a.a.createElement(U,{spirit:i,recipes:r,ratingsPerPage:n}))}}]),t}(a.a.PureComponent),z=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e,t){var n=t.value;return r.props.onChange(n)},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.spirits,r=e.selectedSpirit,n=Array.from(t).sort().map(function(e){return{text:e,value:e}});return a.a.createElement(k.a,{search:!0,selection:!0,placeholder:q.bottlesSpiritSelectPlaceholder,options:n,onChange:this.onChange,defaultValue:r})}}]),t}(a.a.PureComponent),U=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.spirit,r=e.recipes,n=e.ratingsPerPage;return t?a.a.createElement(A,{aggregations:function(e,t){var r=new RegExp("\\s".concat(e,"(\\s|$)"),"i"),n=new Set;return t.forEach(function(e){return e.Ingredients.split("\n").filter(function(e){return null!=e.match(r)}).map(function(e){return e.replace(/\([^)]*\)/g,"")}).map(function(e){return e.replace(/^[^ ]*/,"")}).map(function(e){return e.trim()}).forEach(function(e){return n.add(e)})}),Array.from(n).sort()}(t,r),recipes:r,ratingsPerPage:n}):null}}]),t}(a.a.PureComponent),V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.words,r=e.recipes,n=e.ratingsPerPage;return a.a.createElement(A,{aggregations:t.brands,searchPlaceholder:q.brandsSearchPlaceholder,recipes:r,ratingsPerPage:n})}}]),t}(a.a.PureComponent),F=r(133),J=r(124),G=r(81),M=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onToggle=function(e,t){r.props.onToggle(t.label)},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.items,n=t.className;return a.a.createElement("div",{className:n},a.a.createElement(G.a,{horizontal:!0},r.map(function(t){return a.a.createElement(G.a.Item,{key:t.label},a.a.createElement(J.a,{label:t.label,checked:t.checked,onChange:e.onToggle}))})))}}]),t}(a.a.PureComponent),$=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.text;return a.a.createElement("div",null,function(e){var t=[];return e.split("\n").forEach(function(e,r){t.push(a.a.createElement("span",{key:"line-".concat(r)},e)),t.push(a.a.createElement("br",{key:"newline-".concat(r)}))}),t.pop(),t}(e))}}]),t}(a.a.PureComponent),H=r(296),Z=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e,t){r.props.onChange(t.value)},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.items,n=t.checked,i=t.className;return a.a.createElement("div",{className:i},a.a.createElement(G.a,{horizontal:!0},r.map(function(t){return a.a.createElement(G.a.Item,{key:t.value},a.a.createElement(H.a,{label:t.label,value:t.value,checked:n===t.value,onChange:e.onChange}))})))}}]),t}(a.a.PureComponent),K=r(297),Q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.rating;return a.a.createElement(K.a,{icon:"star",defaultRating:e,maxRating:5,disabled:!0})}}]),t}(a.a.PureComponent),X=function(e){var t={};return e.forEach(function(e){t[e]?t[e]++:t[e]=1}),t},Y=function(){function e(t){Object(s.a)(this,e),this._counter=X(t)}return Object(l.a)(e,[{key:"mostCommon",value:function(e){return Object.entries(this._counter).sort(function(e,t){var r=Object(o.a)(e,2),n=(r[0],r[1]),a=Object(o.a)(t,2);a[0];return a[1]-n}).map(function(e){var t=Object(o.a)(e,2),r=t[0];t[1];return r}).slice(0,e)}}]),e}(),ee="recipesCache";var te,re,ne=function(e,t){var r=!0,n=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var o=i.value,s=new RegExp(o,"gi");e=e.replace(s,o.replace(/ /g,"_"))}}catch(l){n=!0,a=l}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return e},ae=function(e){return e.replace(/_/g," ")},ie=function(e,t){var r=!0,n=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var o=i.value;if(-1!==e.indexOf(o))return!0}}catch(s){n=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return!1},ce=(te=function(e){var t=e.recipes,r=e.numFilters,n=e.words,a=new Set(Object(F.a)(n.combined).concat(Object(F.a)(n.brands),Object(F.a)(n.spirits))),i=[];return t.map(function(e){return e.Ingredients}).forEach(function(e){e.split("\n").filter(function(e){return!ie(e,n.blacklist)}).forEach(function(e){ne(e,a).split(" ").map(function(e){return e.replace(/\([^)]*\)/g,"")}).map(function(e){return ae(e)}).map(function(e){return e.replace(/[^a-zA-Z ]/g,"")}).filter(function(e){return e.length>0}).map(function(e){return e.toLowerCase()}).filter(function(e){return!ie(e,n.quantity)}).filter(function(e){return!ie(e,n.ignored)}).forEach(function(e){return i.push(e)})})}),new Y(i).mostCommon(r).map(function(e){return{term:e,enabled:!1}})},re="getFilterTerms",function(e){var t="".concat(ee,".").concat(e.recipes.length,".").concat(re),r=localStorage.getItem(t);if(null!=r)return JSON.parse(r);var n=te(e);return localStorage.setItem(t,JSON.stringify(n)),n}),oe=function(e,t){if(!t.length)return!0;var r=ae(e.Ingredients).toLowerCase();return t.filter(function(e){return e.enabled}).map(function(e){return e.term.toLowerCase()}).every(function(e){return-1!==r.indexOf(e)})},se=function(e,t,r){if(!t)return!0;var n=ne("".concat(e.Name,"\n").concat(e.Ingredients).toLowerCase(),r.combined);return t.split("&&").map(function(e){return e.trim()}).map(function(e){return e.toLowerCase()}).every(function(e){return-1!==n.indexOf(e)})},le=[{label:q.recipesSortByDate,value:"date"},{label:q.recipesSortByRating,value:"rating",comparator:function(e,t){return t.Rating-e.Rating}}],ue=function(e,t){return{key:"recipe-".concat(t,"-").concat(e.Name,"-").concat(e.Ingredients),header:e.Name,description:a.a.createElement($,{text:ae(e.Ingredients)}),meta:a.a.createElement(Q,{rating:e.Rating})}},pe=function(e){return{label:e.term,checked:e.enabled}},he=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSearchTermToggle=function(e){var t=r.state.filterTerms.map(function(t){var r=t.term,n=t.enabled;return r===e?{term:r,enabled:!n}:{term:r,enabled:n}});r.setState({filterTerms:t})},r.onSearchTextChange=function(e){var t=r.props.words,n=ne(e,t.combined);r.setState({filterText:n})},r.onSortOrderChange=function(e){r.setState({sortOrder:e})},r.shouldShowRecipe=function(e){var t=r.state,n=t.filterTerms,a=t.filterText,i=r.props.words;return oe(e,n)&&se(e,a,i)},r.sort=function(e){var t=r.state.sortOrder,n=le.filter(function(e){return e.value===t}).map(function(e){return e.comparator})[0];return n&&(e=e.sort(n)),e},r.state={sortOrder:"date",filterText:e.query||"",filterTerms:ce(e)},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recipes,r=e.recipesPerPage,n=this.state,i=n.filterTerms,c=n.filterText,o=n.sortOrder,s=this.sort(t.filter(this.shouldShowRecipe));return a.a.createElement("div",null,a.a.createElement("div",{className:"recipeControls"},a.a.createElement(M,{className:"filters",items:i.map(pe),onToggle:this.onSearchTermToggle}),a.a.createElement(W,{className:"searchBar",defaultValue:c,placeholder:q.recipesSearchPlaceholder,onChange:this.onSearchTextChange}),a.a.createElement(Z,{className:"sortOrder",items:le,checked:o,onChange:this.onSortOrderChange})),a.a.createElement(R,{className:"paginatedCardGroup",itemsPerPage:r,items:s.map(ue)}))}}]),t}(a.a.PureComponent),me=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.words,r=e.recipes,n=e.ratingsPerPage;return a.a.createElement(A,{aggregations:t.spirits,searchPlaceholder:q.spiritsSearchPlaceholder,recipes:r,ratingsPerPage:n})}}]),t}(a.a.PureComponent);function fe(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function de(e){return e.json()}function ge(e){return fetch(e).then(fe).then(de)}r(530),r(533);var ve=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e))).onRecipesLoaded=function(e,t){var n=e.recipes,a=e.words;r.setState({recipes:n,words:{combined:new Set(a.combined||[]),blacklist:new Set(a.blacklist||[]),quantity:new Set(a.quantity||[]),brands:new Set(a.brands||[]),ignored:new Set(a.ignored||[]),spirits:new Set(a.spirits||[])},cacheDate:t})},r.onStaleDataWarningDismiss=function(){r.setState({cacheDate:""})},r.renderIndex=function(e){return a.a.createElement(b.a,{to:"/recipes"})},r.renderRecipes=function(e){return a.a.createElement(he,{recipes:r.state.recipes,words:r.state.words,query:e.match.params.query,recipesPerPage:r.props.pageSize,numFilters:r.props.numFilters})},r.renderSpirits=function(e){return a.a.createElement(me,{recipes:r.state.recipes,words:r.state.words,query:e.match.params.query,ratingsPerPage:r.props.pageSize})},r.renderBrands=function(e){return a.a.createElement(V,{recipes:r.state.recipes,words:r.state.words,query:e.match.params.query,ratingsPerPage:r.props.pageSize})},r.renderBottles=function(e){return a.a.createElement(_,{recipes:r.state.recipes,words:r.state.words,query:e.match.params.query,ratingsPerPage:r.props.pageSize})},r.renderStaleDataWarning=function(e){var t=e.cacheDate;return t?a.a.createElement(C.a,{warning:!0,floating:!0,icon:!0,onDismiss:r.onStaleDataWarningDismiss,className:"messageTop"},a.a.createElement(S.a,{name:"plug"}),a.a.createElement(C.a.Content,null,a.a.createElement(C.a.Header,null,q.recipesLoadError),q.recipesCacheWarning," ",t)):null},r.renderNav=function(e){var t=e.location.pathname;return a.a.createElement(P.a,{icon:"labeled",size:"mini",fixed:"bottom"},a.a.createElement(P.a.Item,{as:g.a,to:"/recipes",active:t.startsWith("/recipes")},a.a.createElement(S.a,{name:"cocktail"}),q.menuEntryRecipes),a.a.createElement(P.a.Item,{as:g.a,to:"/spirits",active:t.startsWith("/spirits")},a.a.createElement(S.a,{name:"bar chart"}),q.menuEntrySpirits),a.a.createElement(P.a.Item,{as:g.a,to:"/brands",active:t.startsWith("/brands")},a.a.createElement(S.a,{name:"line chart"}),q.menuEntryBrands),a.a.createElement(P.a.Item,{as:g.a,to:"/bottles",active:t.startsWith("/bottles")},a.a.createElement(S.a,{name:"winner"}),q.menuEntryBottles))},r.state={error:null,recipes:[],words:{},cacheDate:""},r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.recipesUrl,n=t.wordsUrl;Promise.all([ge(r),ge(n)]).then(function(t){var r=Object(o.a)(t,2),n=r[0],a=r[1];e.onRecipesLoaded({recipes:n,words:a}),function(e){var t=e.recipes,r=e.words;window.localStorage.setItem(ee,JSON.stringify({recipes:t,words:r,cacheDate:(new Date).toString()}))}({recipes:n,words:a})}).catch(function(t){var r=function(){var e=window.localStorage.getItem(ee);return e?JSON.parse(e):null}();if(r){var n=r.recipes,a=r.words,i=r.cacheDate;e.onRecipesLoaded({recipes:n,words:a},i)}else e.setState({error:t})})}},{key:"render",value:function(){var e=this.state,t=e.error,r=e.recipes,n=e.cacheDate;return t?a.a.createElement(j.a,null,a.a.createElement(C.a,{error:!0,content:q.recipesLoadError,className:"messageTop"})):0===r.length?null:a.a.createElement(f.a,null,a.a.createElement(j.a,null,this.renderStaleDataWarning({cacheDate:n}),a.a.createElement(O.a,{path:"*",component:this.renderNav}),a.a.createElement(y.a,null,a.a.createElement(O.a,{exact:!0,path:"/",component:this.renderIndex}),a.a.createElement(O.a,{exact:!0,path:"/recipes/:query?",render:this.renderRecipes}),a.a.createElement(O.a,{exact:!0,path:"/spirits/:query?",render:this.renderSpirits}),a.a.createElement(O.a,{exact:!0,path:"/brands/:query?",render:this.renderBrands}),a.a.createElement(O.a,{exact:!0,path:"/bottles/:query?",render:this.renderBottles}))))}}]),t}(a.a.Component),be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(a.a.createElement(ve,{recipesUrl:"https://raw.githubusercontent.com/c-w/cocktails-blog/master/recipes.json",wordsUrl:"https://raw.githubusercontent.com/c-w/cocktails-blog/master/words.json",pageSize:parseInt("6",10),numFilters:parseInt("10",10)}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/cocktails-blog",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/cocktails-blog","/service-worker.js");be?(function(e,t){fetch(e).then(function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):we(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):we(t,e)})}}()}},[[298,2,1]]]);
//# sourceMappingURL=main.0522163d.chunk.js.map