{"version":3,"sources":["components/PaginatedCardGroup.js","components/SearchBar.js","utils/MultiMap.js","i8n/en.js","i8n/index.js","components/AverageRatingsDisplay.js","utils/hashCode.js","utils/mean.js","views/BottlesView.js","views/BrandsView.js","components/MultiLineText.js","components/RadioList.js","components/StarRating.js","views/RecipesView.js","views/SpiritsView.js","utils/cache.js","utils/fetchJson.js","App.js","serviceWorker.js","index.js"],"names":["PaginatedCardGroup","props","onPageChange","event","activePage","setState","state","this","items","itemsPerPage","className","totalPages","Math","ceil","length","pageStart","pageEnd","itemsOnPage","slice","Card","Group","Pagination","prevItem","nextItem","firstItem","lastItem","React","PureComponent","SearchBar","onChange","value","_onChange","defaultValue","debounce","placeholder","Input","icon","Component","MultiMap","_map","key","item","push","func","Object","entries","map","en","recipesCacheWarning","recipesLoadError","recipesSearchPlaceholder","recipesSortByDate","recipesSortByRating","meanRatingSupport","meanRatingValue","brandsSearchPlaceholder","spiritsSearchPlaceholder","bottlesSpiritSelectPlaceholder","bottlesSpiritAllEntries","menuEntryRecipes","menuEntrySpirits","menuEntryBrands","menuEntryBottles","menuEntryAI","colors","toMeanCard","name","mean","support","color","abs","str","hash","i","charCodeAt","hashCode","randomColor","header","description","to","Statistic","label","i8n","toFixed","AverageRatingsDisplay","onSearchTextChange","filterText","query","aggregations","recipes","ratingsPerPage","searchPlaceholder","ratingsFilter","startsWith","maxSupport","parseInt","substr","minSupport","searchTerms","toLowerCase","split","searchTerm","trim","some","indexOf","buildRatingsFilter","meanRatings","aggregationToRatings","forEach","aggregation","filter","recipe","Ingredients","add","Rating","numbers","ratings","reduce","prev","cur","sum","sort","a","b","sign","toMean","matcherFor","spirits","RegExp","Array","from","join","getBottlesForSpirit","spirit","spiritMatcher","bottles","Set","ingredient","match","replace","bottle","BottlesView","onSpiritChange","selectedSpirit","words","SpiritsSelector","e","allOption","text","spiritOptions","options","concat","Dropdown","search","selection","TopBottlesDisplay","BrandsView","brands","MultilineText","lines","line","pop","textToLines","RadioList","checked","List","horizontal","Item","Radio","StarRating","rating","defaultRating","maxRating","disabled","sortOrders","comparator","recipeA","recipeB","recipeToCard","Name","window","location","href","meta","RecipesView","onSortOrderChange","sortOrder","shouldShowRecipe","searchCorpus","partition","excludeTerms","every","includeTerm","excludeTerm","substring","hasFilterText","order","noSort","recipesPerPage","displayableRecipes","SpiritsView","RECIPES_CACHE_KEY","loadRecipesData","cached","localStorage","getItem","JSON","parse","checkStatus","response","status","error","Error","statusText","parseJSON","json","fetchJson","url","fetch","then","App","onRecipesLoaded","cacheDate","aiRecipes","onStaleDataWarningDismiss","renderIndex","renderRecipes","params","pageSize","renderSpirits","renderBrands","renderBottles","renderAI","renderStaleDataWarning","Message","warning","floating","onDismiss","Icon","Content","Header","renderNav","pathname","Menu","size","fixed","as","Link","active","recipesUrl","aiRecipesUrl","wordsUrl","Promise","all","newData","oldData","setItem","stringify","Date","toString","storeRecipesData","catch","Container","content","path","component","exact","render","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","ReactDOM","process","document","getElementById","URL","origin","addEventListener","contentType","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.b604059d.chunk.js","sourcesContent":["import React from 'react';\nimport Card from 'semantic-ui-react/dist/es/views/Card/Card';\nimport Pagination from 'semantic-ui-react/dist/es/addons/Pagination/Pagination';\n\nexport default class PaginatedCardGroup extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activePage: 1\n    };\n  }\n\n  onPageChange = (event, props) => {\n    const { activePage } = props;\n    this.setState({ activePage });\n  }\n\n  render() {\n    const { activePage } = this.state;\n    const { items, itemsPerPage, className } = this.props;\n\n    const totalPages = Math.ceil(items.length / itemsPerPage);\n    const pageStart = (activePage - 1) * itemsPerPage;\n    const pageEnd = pageStart + itemsPerPage;\n    const itemsOnPage = items.slice(pageStart, pageEnd);\n\n    return (\n      <div className={className}>\n        <div className=\"group\">\n          <Card.Group items={itemsOnPage} />\n        </div>\n        <div className=\"pagination\">\n          <Pagination\n            prevItem={null}\n            nextItem={null}\n            firstItem={null}\n            lastItem={null}\n            activePage={activePage}\n            onPageChange={this.onPageChange}\n            totalPages={totalPages}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Input from 'semantic-ui-react/dist/es/elements/Input/Input';\nimport debounce from 'lodash/debounce';\n\nconst ON_CHANGE_DEBOUNCE_MS = 250;\n\nexport default class SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n    };\n\n    this._onChange = debounce(props.onChange, ON_CHANGE_DEBOUNCE_MS);\n  }\n\n  onChange = (event, props) => {\n    const { value } = props;\n\n    this.setState({ value }, () => this._onChange(value));\n  }\n\n  render() {\n    const { placeholder, className } = this.props;\n    const { value } = this.state;\n\n    return (\n      <div className={className}>\n        <Input\n          icon=\"search\"\n          value={value}\n          placeholder={placeholder}\n          onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n","export default class MultiMap {\n  constructor() {\n    this._map = {};\n  }\n\n  add(key, item) {\n    if (!this._map[key]) this._map[key] = [];\n    this._map[key].push(item);\n  }\n\n  get(key) {\n    return this._map[key] || [];\n  }\n\n  map(func) {\n    return Object.entries(this._map).map(func);\n  }\n}\n","export default {\n  recipesCacheWarning: 'Using cached recipes, last updated:',\n  recipesLoadError: 'Something went wrong while loading the recipes',\n  recipesSearchPlaceholder: 'Search for recipes...',\n  recipesSortByDate: 'Sort by date',\n  recipesSortByRating: 'Sort by rating',\n  meanRatingSupport: 'Cocktails',\n  meanRatingValue: 'Avg Rating',\n  brandsSearchPlaceholder: 'Search for brands...',\n  spiritsSearchPlaceholder: 'Search for spirits...',\n  bottlesSpiritSelectPlaceholder: 'Select spirit...',\n  bottlesSpiritAllEntries: '(All)',\n  menuEntryRecipes: 'Recipes',\n  menuEntrySpirits: 'Top Spirits',\n  menuEntryBrands: 'Top brands',\n  menuEntryBottles: 'Top bottles',\n  menuEntryAI: 'AI',\n};\n","import en from './en';\n\nexport default en;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Statistic from 'semantic-ui-react/dist/es/views/Statistic/Statistic';\nimport PaginatedCardGroup from './PaginatedCardGroup';\nimport SearchBar from './SearchBar';\nimport MultiMap from '../utils/MultiMap';\nimport mean from '../utils/mean';\nimport hashCode from '../utils/hashCode';\nimport i8n from '../i8n';\n\nconst colors = ['orange', 'yellow', 'olive', 'green', 'teal', 'blue', 'violet', 'purple', 'pink', 'brown'];\n\nconst randomColor = (name) => colors[Math.abs(hashCode(name)) % colors.length];\n\nconst toMeanCard = ({ name, mean, support }) => {\n  const color = randomColor(name);\n\n  return {\n    key: name,\n    header: name,\n    color,\n    description:\n      <Link to={`/recipes/${name}`}>\n        <Statistic.Group>\n          <Statistic label={i8n.meanRatingSupport} value={support} color={color} />\n          <Statistic label={i8n.meanRatingValue} value={mean.toFixed(2)} color={color} />\n        </Statistic.Group>\n      </Link>\n  };\n}\n\nconst toMean = (recipes, aggregations) => {\n  const aggregationToRatings = new MultiMap();\n  aggregations.forEach(aggregation =>\n    recipes.filter(recipe => recipe.Ingredients.toLowerCase().indexOf(aggregation.toLowerCase()) !== -1).forEach(recipe =>\n      aggregationToRatings.add(aggregation, recipe.Rating)));\n\n  return aggregationToRatings\n    .map(([name, ratings]) => ({ name, mean: mean(ratings), support: ratings.length }))\n    .sort((a, b) => Math.sign(b.mean - a.mean));\n}\n\nconst buildRatingsFilter = (filterText) => {\n  if (filterText.startsWith('#<')) {\n    const maxSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support < maxSupport;\n  }\n\n  if (filterText.startsWith('#>')) {\n    const minSupport = parseInt(filterText.substr(2), 10);\n    return ({ support }) => support > minSupport;\n  }\n\n  if (filterText.length > 0) {\n    const searchTerms = filterText.toLowerCase().split('||').map(searchTerm => searchTerm.trim());\n    return ({ name }) => searchTerms.some(searchTerm => name.toLowerCase().indexOf(searchTerm) !== -1);\n  }\n\n  return () => true;\n}\n\nexport default class AverageRatingsDisplay extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filterText: props.query || ''\n    };\n  }\n\n  onSearchTextChange = (filterText) => {\n    this.setState({ filterText });\n  }\n\n  render() {\n    const { aggregations, recipes, ratingsPerPage, searchPlaceholder } = this.props;\n    const { filterText } = this.state;\n\n    const ratingsFilter = buildRatingsFilter(filterText);\n    const meanRatings = toMean(recipes, aggregations).filter(ratingsFilter);\n\n    return (\n      <div>\n        <div className=\"brandControls\">\n          {searchPlaceholder &&\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={searchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />}\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={ratingsPerPage}\n          items={meanRatings.map(toMeanCard)}\n          key={meanRatings}\n        />\n      </div>\n    );\n  }\n}\n","export default function hashCode(str) {\n  let hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    let chr = str.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0;\n  }\n\n  return hash;\n}\n","function sum(numbers) {\n  return numbers.reduce((prev, cur) => prev + cur, 0);\n}\n\nexport default function mean(numbers) {\n  return sum(numbers) / numbers.length;\n}\n","import React from 'react';\nimport Dropdown from 'semantic-ui-react/dist/es/modules/Dropdown/Dropdown';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nfunction matcherFor(spirits) {\n  return new RegExp(`\\\\s(${Array.from(spirits).join('|')})(\\\\s|$)`, 'i');\n}\n\nfunction getBottlesForSpirit(spirit, spirits, recipes) {\n  const spiritMatcher = !spirit ? matcherFor(spirits) : matcherFor([spirit]);\n\n  const bottles = new Set();\n\n  recipes.forEach(recipe =>\n    recipe.Ingredients\n      .split('\\n')\n      .filter(ingredient => ingredient.match(spiritMatcher) != null)\n      .map(ingredient => ingredient.replace(/\\([^)]*\\)/g, ''))\n      .map(ingredient => ingredient.replace(/^[^ ]*/, ''))\n      .map(ingredient => ingredient.trim())\n      .forEach(bottle => bottles.add(bottle)));\n\n  return Array.from(bottles).sort();\n}\n\nexport default class BottlesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedSpirit: props.query\n    };\n  }\n\n  onSpiritChange = (selectedSpirit) => this.setState({ selectedSpirit });\n\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n    const { selectedSpirit } = this.state;\n\n    return (\n      <div>\n        <div className=\"bottleControls\">\n          <SpiritsSelector\n            selectedSpirit={selectedSpirit}\n            spirits={words.spirits}\n            onChange={this.onSpiritChange}\n          />\n        </div>\n        <TopBottlesDisplay\n          spirit={selectedSpirit}\n          spirits={words.spirits}\n          recipes={recipes}\n          ratingsPerPage={ratingsPerPage}\n        />\n      </div>\n    );\n  }\n}\n\nclass SpiritsSelector extends React.PureComponent {\n  onChange = (e, { value }) => this.props.onChange(value);\n\n  render() {\n    const { spirits, selectedSpirit } = this.props;\n\n    const allOption = { text: i8n.bottlesSpiritAllEntries, value: '' };\n    const spiritOptions = Array.from(spirits).sort().map(spirit => ({ text: spirit, value: spirit }));\n    const options = [allOption].concat(spiritOptions);\n\n    return (\n      <Dropdown\n        search\n        selection\n        placeholder={i8n.bottlesSpiritSelectPlaceholder}\n        options={options}\n        onChange={this.onChange}\n        defaultValue={selectedSpirit}\n      />\n    );\n  }\n}\n\nclass TopBottlesDisplay extends React.PureComponent {\n  render() {\n    const { spirit, spirits, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={getBottlesForSpirit(spirit, spirits, recipes)}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class BrandsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.brands}\n        searchPlaceholder={i8n.brandsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","import React from 'react';\n\nconst textToLines = (text) => {\n  const lines = [];\n\n  text.split('\\n').forEach((line, i) => {\n    lines.push(<span key={`line-${i}`}>{line}</span>);\n    lines.push(<br key={`newline-${i}`} />);\n  });\n  lines.pop();\n\n  return lines;\n}\n\nexport default class MultilineText extends React.PureComponent {\n  render() {\n    const { text } = this.props;\n\n    return <div>{textToLines(text)}</div>;\n  }\n}\n","import React from 'react';\nimport List from 'semantic-ui-react/dist/es/elements/List/List';\nimport Radio from 'semantic-ui-react/dist/es/addons/Radio/Radio';\n\nexport default class RadioList extends React.PureComponent {\n  onChange = (event, props) => {\n    this.props.onChange(props.value);\n  }\n\n  render() {\n    const { items, checked, className } = this.props;\n\n    return (\n      <div className={className}>\n        <List horizontal>\n          {items.map(item =>\n            <List.Item key={item.value}>\n              <Radio\n                label={item.label}\n                value={item.value}\n                checked={checked === item.value}\n                onChange={this.onChange}\n              />\n            </List.Item>\n          )}\n        </List>\n      </div>\n    );\n  };\n}\n","import React from 'react';\nimport Rating from 'semantic-ui-react/dist/es/modules/Rating/Rating';\n\nconst maxRating = 5;\n\nexport default class StarRating extends React.PureComponent {\n  render() {\n    const { rating } = this.props;\n\n    return (\n      <Rating\n        icon='star'\n        defaultRating={rating}\n        maxRating={maxRating}\n        disabled\n      />\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport partition from 'lodash/partition';\nimport MultilineText from '../components/MultiLineText';\nimport PaginatedCardGroup from '../components/PaginatedCardGroup';\nimport RadioList from '../components/RadioList';\nimport SearchBar from '../components/SearchBar';\nimport StarRating from '../components/StarRating';\nimport i8n from '../i8n';\n\nconst hasFilterText = (recipe, filterText) => {\n  if (!filterText) {\n    return true;\n  }\n\n  const searchCorpus = `${recipe.Name}\\n${recipe.Ingredients}`.toLowerCase();\n\n  const searchTerms = filterText\n    .split('&&')\n    .map(searchTerm => searchTerm.trim())\n    .map(searchTerm => searchTerm.toLowerCase());\n\n  const [ excludeTerms, includeTerms ] = partition(searchTerms, searchTerm => searchTerm.startsWith('!'));\n\n  return includeTerms.every(includeTerm => searchCorpus.indexOf(includeTerm) !== -1)\n      && excludeTerms.every(excludeTerm => searchCorpus.indexOf(excludeTerm.substring(1)) === -1);\n};\n\nconst sortOrders = [\n  {label: i8n.recipesSortByDate, value: \"date\"},\n  {label: i8n.recipesSortByRating, value: \"rating\", comparator: (recipeA, recipeB) => recipeB.Rating - recipeA.Rating},\n];\n\nconst recipeToCard = (recipe, i) => ({\n  key: `recipe-${i}-${recipe.Name}-${recipe.Ingredients}`,\n  header: recipe.Name,\n  description:\n    <Link to={`/${window.location.href.split('#')[1].split('/')[1]}/${recipe.Name}`}>\n      <MultilineText text={recipe.Ingredients} />\n    </Link>,\n  meta: <StarRating rating={recipe.Rating} />\n});\n\nexport default class RecipesView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortOrder: 'date',\n      filterText: props.query || '',\n    };\n  }\n\n  onSearchTextChange = (filterText) => {\n    this.setState({ filterText });\n  }\n\n  onSortOrderChange = (sortOrder) => {\n    this.setState({ sortOrder });\n  }\n\n  shouldShowRecipe = (recipe) => {\n    const { filterText } = this.state;\n\n    return hasFilterText(recipe, filterText);\n  }\n\n  sort = (recipes) => {\n    const { sortOrder } = this.state;\n\n    const comparator = sortOrders\n      .filter(order => order.value === sortOrder)\n      .map(order => order.comparator)[0];\n\n    if (comparator) {\n      recipes = recipes.sort(comparator);\n    }\n\n    return recipes;\n  }\n\n  render() {\n    const { noSort, recipes, recipesPerPage } = this.props;\n    const { filterText, sortOrder } = this.state;\n\n    const displayableRecipes = this.sort(recipes.filter(this.shouldShowRecipe));\n\n    return (\n      <div>\n        <div className=\"recipeControls\">\n          <SearchBar\n            className=\"searchBar\"\n            defaultValue={filterText}\n            placeholder={i8n.recipesSearchPlaceholder}\n            onChange={this.onSearchTextChange}\n          />\n          {!noSort && <RadioList\n            className=\"sortOrder\"\n            items={sortOrders}\n            checked={sortOrder}\n            onChange={this.onSortOrderChange}\n          />}\n        </div>\n        <PaginatedCardGroup\n          className=\"paginatedCardGroup\"\n          itemsPerPage={recipesPerPage}\n          items={displayableRecipes.map(recipeToCard)}\n          key={displayableRecipes}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport AverageRatingsDisplay from '../components/AverageRatingsDisplay';\nimport i8n from '../i8n';\n\nexport default class SpiritsView extends React.PureComponent {\n  render() {\n    const { words, recipes, ratingsPerPage } = this.props;\n\n    return (\n      <AverageRatingsDisplay\n        aggregations={words.spirits}\n        searchPlaceholder={i8n.spiritsSearchPlaceholder}\n        recipes={recipes}\n        ratingsPerPage={ratingsPerPage}\n      />\n    );\n  }\n}\n","const RECIPES_CACHE_KEY = 'recipesCache.recipes';\n\nexport function storeRecipesData(newData) {\n  const oldData = loadRecipesData();\n\n  if (oldData?.recipes?.length === newData.recipes.length &&\n      oldData?.aiRecipes?.length === newData.aiRecipes.length &&\n      oldData?.words?.length === newData.words.length) {\n    return;\n  }\n\n  localStorage.setItem(RECIPES_CACHE_KEY, JSON.stringify({\n    recipes: newData.recipes,\n    aiRecipes: newData.aiRecipes,\n    words: newData.words,\n    cacheDate: new Date().toString(),\n  }));\n}\n\nexport function loadRecipesData() {\n  const cached = localStorage.getItem(RECIPES_CACHE_KEY);\n  if (!cached) {\n    return null;\n  }\n\n  return JSON.parse(cached);\n}\n","function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    const error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nfunction parseJSON(response) {\n  return response.json()\n}\n\nexport default function fetchJson(url) {\n  return fetch(url)\n    .then(checkStatus)\n    .then(parseJSON);\n}\n","import React from 'react';\nimport { HashRouter, Link, Redirect, Route, Switch } from 'react-router-dom';\nimport Container from 'semantic-ui-react/dist/es/elements/Container/Container';\nimport Icon from 'semantic-ui-react/dist/es/elements/Icon/Icon';\nimport Menu from 'semantic-ui-react/dist/es/collections/Menu/Menu';\nimport Message from 'semantic-ui-react/dist/es/collections/Message/Message';\nimport BottlesView from './views/BottlesView';\nimport BrandsView from './views/BrandsView';\nimport RecipesView from './views/RecipesView';\nimport SpiritsView from './views/SpiritsView';\nimport { storeRecipesData, loadRecipesData } from './utils/cache';\nimport fetchJson from './utils/fetchJson';\nimport i8n from './i8n';\nimport 'semantic-ui-css/semantic.min.css';\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      recipes: [],\n      aiRecipes: [],\n      words: {},\n      cacheDate: '',\n    };\n  }\n\n  componentDidMount() {\n    const { recipesUrl, aiRecipesUrl, wordsUrl } = this.props;\n\n    Promise.all([\n      fetchJson(recipesUrl),\n      fetchJson(aiRecipesUrl),\n      fetchJson(wordsUrl),\n    ])\n      .then(([recipes, aiRecipes, words]) => {\n        this.onRecipesLoaded({ recipes, aiRecipes, words });\n        storeRecipesData({ recipes, aiRecipes, words });\n      })\n      .catch(error => {\n        const cached = loadRecipesData();\n        if (!cached) {\n          this.setState({ error });\n          return;\n        }\n\n        const { recipes, aiRecipes, words, cacheDate } = cached;\n        this.onRecipesLoaded({ recipes, aiRecipes, words }, cacheDate);\n      });\n  }\n\n  onRecipesLoaded = ({ recipes, aiRecipes, words }, cacheDate) => {\n    this.setState({\n      recipes,\n      aiRecipes,\n      words: {\n        brands: new Set(words.brands || []),\n        spirits: new Set(words.spirits || []),\n      },\n      cacheDate,\n    });\n  }\n\n  onStaleDataWarningDismiss = () => {\n    this.setState({ cacheDate: '' });\n  }\n\n  renderIndex = (props) =>\n    <Redirect to=\"/recipes\" />\n\n  renderRecipes = (props) =>\n    <RecipesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      recipesPerPage={this.props.pageSize}\n      key={props.match.params.query}\n    />\n\n  renderSpirits = (props) =>\n    <SpiritsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBrands = (props) =>\n    <BrandsView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderBottles = (props) =>\n    <BottlesView\n      recipes={this.state.recipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      ratingsPerPage={this.props.pageSize}\n    />\n\n  renderAI = (props) =>\n    <RecipesView\n      recipes={this.state.aiRecipes}\n      words={this.state.words}\n      query={props.match.params.query}\n      recipesPerPage={this.props.pageSize}\n      key={props.match.params.query}\n      noSort\n    />\n\n  renderStaleDataWarning = (props) => {\n    const { cacheDate } = props;\n    if (!cacheDate) {\n      return null;\n    }\n\n    return (\n      <Message warning floating icon onDismiss={this.onStaleDataWarningDismiss} className=\"messageTop\">\n        <Icon name=\"plug\" />\n        <Message.Content>\n          <Message.Header>{i8n.recipesLoadError}</Message.Header>\n          {i8n.recipesCacheWarning} {cacheDate}\n        </Message.Content>\n      </Message>\n    );\n  }\n\n  renderNav = (props) => {\n    const location = props.location.pathname;\n\n    return (\n      <Menu icon=\"labeled\" size=\"mini\" fixed=\"bottom\">\n        <Menu.Item as={Link} to=\"/recipes\" active={location.startsWith('/recipes')}>\n          <Icon name=\"cocktail\" />\n          {i8n.menuEntryRecipes}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/spirits\" active={location.startsWith('/spirits')}>\n          <Icon name=\"bar chart\" />\n          {i8n.menuEntrySpirits}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/brands\" active={location.startsWith('/brands')}>\n          <Icon name=\"line chart\" />\n          {i8n.menuEntryBrands}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/bottles\" active={location.startsWith('/bottles')}>\n          <Icon name=\"winner\" />\n          {i8n.menuEntryBottles}\n        </Menu.Item>\n        <Menu.Item as={Link} to=\"/ai\" active={location.startsWith('/ai')}>\n          <Icon name=\"flask\" />\n          {i8n.menuEntryAI}\n        </Menu.Item>\n      </Menu>\n    );\n  }\n\n  render() {\n    const { error, recipes, cacheDate } = this.state;\n\n    if (error) {\n      return (\n        <Container>\n          <Message error content={i8n.recipesLoadError} className=\"messageTop\" />\n        </Container>\n      );\n    }\n\n    if (recipes.length === 0) {\n      return null;\n    }\n\n    return (\n      <HashRouter>\n        <Container>\n          {this.renderStaleDataWarning({ cacheDate })}\n          <Route path=\"*\" component={this.renderNav} />\n          <Switch>\n            <Route exact path=\"/\" component={this.renderIndex} />\n            <Route exact path=\"/recipes/:query?\" render={this.renderRecipes} />\n            <Route exact path=\"/spirits/:query?\" render={this.renderSpirits} />\n            <Route exact path=\"/brands/:query?\" render={this.renderBrands} />\n            <Route exact path=\"/bottles/:query?\" render={this.renderBottles} />\n            <Route exact path=\"/ai/:query?\" render={this.renderAI} />\n          </Switch>\n        </Container>\n      </HashRouter>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App\n    recipesUrl={process.env.REACT_APP_RECIPES_URL}\n    aiRecipesUrl={process.env.REACT_APP_AI_RECIPES_URL}\n    wordsUrl={process.env.REACT_APP_WORDS_URL}\n    pageSize={parseInt(process.env.REACT_APP_PAGE_SIZE, 10)}\n  />,\n  document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}